2025-10-02 02:26:15.406  7026-7026  Capacitor/...oardPlugin com.confessr.app                     V  Notifying listeners for event keyboardWillShow
2025-10-02 02:26:15.406  7026-7026  Capacitor/...oardPlugin com.confessr.app                     D  No listeners found for event keyboardWillShow
2025-10-02 02:26:15.701  7026-7026  Capacitor/...oardPlugin com.confessr.app                     V  Notifying listeners for event keyboardDidShow
2025-10-02 02:26:15.701  7026-7026  Capacitor/...oardPlugin com.confessr.app                     D  No listeners found for event keyboardDidShow
2025-10-02 02:26:17.168  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 728 - Msg: üì§ Send button clicked, processing message... [object Object]
2025-10-02 02:26:17.170  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 728 - Msg: üì§ About to send message: [object Object]
2025-10-02 02:26:17.170  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 386 - Msg: üì§ sendMessage called: [object Object]
2025-10-02 02:26:17.170  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 728 - Msg: ‚úÖ Message dispatched, clearing input
2025-10-02 02:26:17.171  7026-7026  Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 46355833, pluginId: Network, methodName: getStatus
2025-10-02 02:26:17.171  7026-7026  Capacitor               com.confessr.app                     V  callback: 46355833, pluginId: Network, methodName: getStatus, methodData: {}
2025-10-02 02:26:17.191  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 386 - Msg: üåê Network status: [object Object]
2025-10-02 02:26:17.298  7026-7026  Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 46355834, pluginId: CapacitorSQLite, methodName: run
2025-10-02 02:26:17.299  7026-7026  Capacitor               com.confessr.app                     V  callback: 46355834, pluginId: CapacitorSQLite, methodName: run, methodData: {"database":"confessr_db","statement":"INSERT OR REPLACE INTO messages\n       (id, group_id, user_id, content, is_ghost, message_type, category, parent_id, image_url, created_at, updated_at, deleted_at)\n       VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?);","values":["1759352177188-kuemkivpjgm","78045bbf-7474-46df-aac1-f34936b67d24","839d1d4a-e72b-47bb-b74e-ef28a15f43ee","Slow",1,"text",null,null,null,1759352177189,null,null],"transaction":true,"readonly":false,"returnMode":"no","isSQL92":true}
2025-10-02 02:26:17.397  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:17.382 üì§ Sending message 1759352177188-kuemkivpjgm...
2025-10-02 02:26:17.398  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:17.382 [send-1759352177188-kuemkivpjgm] stage: entered send
2025-10-02 02:26:17.398  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:17.382 [send-1759352177188-kuemkivpjgm] input: group=78045bbf user=839d1d4a ghost=true type=text dedupe=true
2025-10-02 02:26:17.398  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:17.382 [send-1759352177188-kuemkivpjgm] checkHealth() -> start
2025-10-02 02:26:17.417  7026-7026  Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 46355835, pluginId: Network, methodName: getStatus
2025-10-02 02:26:17.417  7026-7026  Capacitor               com.confessr.app                     V  callback: 46355835, pluginId: Network, methodName: getStatus, methodData: {}
2025-10-02 02:26:17.459  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:17.438 üåê Network state: online=true webViewReady=true type=cellular
2025-10-02 02:26:17.459  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:17.439 üè• Health check: starting (online=true webViewReady=true)
2025-10-02 02:26:17.459  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:17.439 üè• Health check: using cached access token (healthy)
2025-10-02 02:26:17.459  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:17.439 [send-1759352177188-kuemkivpjgm] checkHealth() -> healthy
2025-10-02 02:26:17.459  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:17.439 [send-1759352177188-kuemkivpjgm] stage: health ok
2025-10-02 02:26:17.459  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:17.439 üì§ Direct send attempt 1/3 - message 1759352177188-kuemkivpjgm
2025-10-02 02:26:17.459  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:17.439 [send-1759352177188-kuemkivpjgm] stage: pre-network
2025-10-02 02:26:17.460  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:17.439 [send-1759352177188-kuemkivpjgm] pre-network: acquiring full client (‚â§5000ms)
2025-10-02 02:26:17.460  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:17.439 üîë getClient() called - hasClient=true isInitialized=true initPromiseActive=false
2025-10-02 02:26:22.450  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:22.439 [send-1759352177188-kuemkivpjgm] Direct send timeout after 5000ms ‚Üí enqueued to outbox
2025-10-02 02:26:22.451  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:22.440 [send-1759352177188-kuemkivpjgm] fallbackToOutbox(): waited sqliteReady in 0ms
2025-10-02 02:26:22.473  7026-7026  Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 46355836, pluginId: CapacitorSQLite, methodName: run
2025-10-02 02:26:22.473  7026-7026  Capacitor               com.confessr.app                     V  callback: 46355836, pluginId: CapacitorSQLite, methodName: run, methodData: {"database":"confessr_db","statement":"\n      INSERT INTO outbox (group_id, user_id, content, retry_count, next_retry_at)\n      VALUES (?, ?, ?, ?, ?)\n    ","values":["78045bbf-7474-46df-aac1-f34936b67d24","839d1d4a-e72b-47bb-b74e-ef28a15f43ee","{\"id\":\"1759352177188-kuemkivpjgm\",\"content\":\"Slow\",\"is_ghost\":true,\"message_type\":\"text\",\"category\":null,\"parent_id\":null,\"image_url\":null,\"dedupe_key\":\"d:839d1d4a-e72b-47bb-b74e-ef28a15f43ee:78045bbf-7474-46df-aac1-f34936b67d24:1759352177188-kuemkivpjgm\",\"requires_pseudonym\":true}",0,1759352182440],"transaction":true,"readonly":false,"returnMode":"no","isSQL92":true}
2025-10-02 02:26:22.533  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:22.512 üì¶ Message 1759352177188-kuemkivpjgm stored in outbox (dedupe_key=d:839d1d4a-e72b-47bb-b74e-ef28a15f43ee:78045bbf-7474-46df-aac1-f34936b67d24:1759352177188-kuemkivpjgm)
2025-10-02 02:26:22.533  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:22.512 üì¶ Triggering outbox processing from: pipeline-fallback
2025-10-02 02:26:22.534  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:22.512 ‚ùå Direct send attempt 1 failed - message 1759352177188-kuemkivpjgm: MessageQueuedError: Message 1759352177188-kuemkivpjgm queued to outbox (pre-network timeout)
                                                                                                    MessageQueuedError: Message 1759352177188-kuemkivpjgm queued to outbox (pre-network timeout)
                                                                                                        at Nl.sendMessageInternal (https://localhost/assets/index-Cj_V1rE1.js:355:4983)
                                                                                                        at async Nl.sendMessage (https://localhost/assets/index-Cj_V1rE1.js:355:2609)
                                                                                                        at async sendMessage (https://localhost/assets/index-Cj_V1rE1.js:386:32893)
2025-10-02 02:26:22.535  7026-7026  Capacitor/Console       com.confessr.app                     D  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [send-1759352177188-kuemkivpjgm] attempt-1: 5073.80615234375 ms
2025-10-02 02:26:22.535  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:22.513 [send-1759352177188-kuemkivpjgm] immediate fallback due to error="Message 1759352177188-kuemkivpjgm queued to outbox (pre-network timeout)" at 2025-10-01T20:56:22.513Z
2025-10-02 02:26:22.536  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:22.513 [send-1759352177188-kuemkivpjgm] fallbackToOutbox(): waited sqliteReady in 0ms
2025-10-02 02:26:22.537  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:22.519 üì¶ Starting outbox processing - session outbox-1759352182519
2025-10-02 02:26:22.538  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:22.520 üì¶ Outbox pre-check: sqliteReady after 0ms
2025-10-02 02:26:22.552  7026-7026  Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 46355837, pluginId: CapacitorSQLite, methodName: run
2025-10-02 02:26:22.553  7026-7026  Capacitor               com.confessr.app                     V  callback: 46355837, pluginId: CapacitorSQLite, methodName: run, methodData: {"database":"confessr_db","statement":"\n      INSERT INTO outbox (group_id, user_id, content, retry_count, next_retry_at)\n      VALUES (?, ?, ?, ?, ?)\n    ","values":["78045bbf-7474-46df-aac1-f34936b67d24","839d1d4a-e72b-47bb-b74e-ef28a15f43ee","{\"id\":\"1759352177188-kuemkivpjgm\",\"content\":\"Slow\",\"is_ghost\":true,\"message_type\":\"text\",\"category\":null,\"parent_id\":null,\"image_url\":null,\"dedupe_key\":\"d:839d1d4a-e72b-47bb-b74e-ef28a15f43ee:78045bbf-7474-46df-aac1-f34936b67d24:1759352177188-kuemkivpjgm\",\"requires_pseudonym\":true}",0,1759352182514],"transaction":true,"readonly":false,"returnMode":"no","isSQL92":true}
2025-10-02 02:26:22.555  7026-7026  Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 46355838, pluginId: CapacitorSQLite, methodName: query
2025-10-02 02:26:22.556  7026-7026  Capacitor               com.confessr.app                     V  callback: 46355838, pluginId: CapacitorSQLite, methodName: query, methodData: {"database":"confessr_db","statement":"\n      SELECT * FROM outbox \n      WHERE next_retry_at <= ? \n      ORDER BY next_retry_at ASC\n    ","values":[1759352182520],"readonly":false,"isSQL92":true}
2025-10-02 02:26:22.600  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:22.585 üì¶ Message 1759352177188-kuemkivpjgm stored in outbox (dedupe_key=d:839d1d4a-e72b-47bb-b74e-ef28a15f43ee:78045bbf-7474-46df-aac1-f34936b67d24:1759352177188-kuemkivpjgm)
2025-10-02 02:26:22.601  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:22.585 üì¶ Trigger coalesced (debounced 300ms) from: pipeline-fallback
2025-10-02 02:26:22.602  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:22.585 üì¶ Message 1759352177188-kuemkivpjgm queued to outbox
2025-10-02 02:26:22.602  7026-7026  Capacitor/Console       com.confessr.app                     D  File: https://localhost/assets/index-Cj_V1rE1.js - Line 355 - Msg: [send-1759352177188-kuemkivpjgm] total: 5202.890869140625 ms
2025-10-02 02:26:22.602  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:22.585 [send-1759352177188-kuemkivpjgm] finished
2025-10-02 02:26:22.603  7026-7026  Capacitor/Console       com.confessr.app                     E  File: https://localhost/assets/index-Cj_V1rE1.js - Line 386 - Msg: üì§ Pipeline send outcome for message: 1759352177188-kuemkivpjgm MessageQueuedError: Message 1759352177188-kuemkivpjgm queued to outbox (direct send error)
2025-10-02 02:26:22.604  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 386 - Msg: üì¶ Message queued to outbox; keeping delivery_status as sending
2025-10-02 02:26:22.605  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:22.589 üì¶ non-empty: start (4)
2025-10-02 02:26:22.615  7026-7026  Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 46355839, pluginId: Network, methodName: getStatus
2025-10-02 02:26:22.615  7026-7026  Capacitor               com.confessr.app                     V  callback: 46355839, pluginId: Network, methodName: getStatus, methodData: {}
2025-10-02 02:26:22.642  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:22.627 üåê Network state: online=true webViewReady=true type=cellular
2025-10-02 02:26:22.643  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:22.627 üè• Health check: starting (online=true webViewReady=true)
2025-10-02 02:26:22.644  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:22.627 üè• Health check: using cached access token (healthy)
2025-10-02 02:26:22.644  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:22.628 üîë getClient() called - hasClient=true isInitialized=true initPromiseActive=false
2025-10-02 02:26:22.645  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:22.628 üì¶ Processing outbox message 1/4 (ID: 25)
2025-10-02 02:26:22.645  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:22.628 [#25] attempt start (dk=d:839d1d4a-e72b-47bb-b74e-ef28a15f43ee:78045bbf-7474-46df-aac1-f34936b67d24:1759352074717-6dpg1gf8due)
2025-10-02 02:26:22.646  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:22.628 [#25] requires_pseudonym=true  attempting upsert before send
2025-10-02 02:26:22.646  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:22.628 [#25] POST /messages (outbox fast-path)
2025-10-02 02:26:22.646  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:22.628 [outbox-25] stage: pre-network
2025-10-02 02:26:22.646  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:22.629 [outbox-25] fast-path: direct REST upsert -> https://sxykfyqrqwifkirveqgr.supabase.co/rest/v1/messages?on_conflict=dedupe_key&select=*,reactions(*),users!messages_user_id_fkey(display_name,avatar_url)
2025-10-02 02:26:22.647  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:22.629 [outbox-25] POST /messages (fast-path)
2025-10-02 02:26:22.647  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:22.629 [outbox-25] stage: network attempt started (path=rest)
2025-10-02 02:26:22.878  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:22.869 ‚ùå Outbox message 25 failed: Error: REST upsert failed: 403 {"code":"42501","details":null,"hint":null,"message":"new row violates row-level security policy (USING expression) for table \"messages\""}
                                                                                                    Error: REST upsert failed: 403 {"code":"42501","details":null,"hint":null,"message":"new row violates row-level security policy (USING expression) for table \"messages\""}
                                                                                                        at Nl.fastPathDirectUpsert (https://localhost/assets/index-Cj_V1rE1.js:359:3396)
                                                                                                        at async Nl.processOutbox (https://localhost/assets/index-Cj_V1rE1.js:359:8751)
2025-10-02 02:26:22.893  7026-7026  Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 46355840, pluginId: CapacitorSQLite, methodName: run
2025-10-02 02:26:22.893  7026-7026  Capacitor               com.confessr.app                     V  callback: 46355840, pluginId: CapacitorSQLite, methodName: run, methodData: {"database":"confessr_db","statement":"\n      UPDATE outbox \n      SET retry_count = ?, next_retry_at = ? \n      WHERE id = ?\n    ","values":[3,1759352184012,25],"transaction":true,"readonly":false,"returnMode":"no","isSQL92":true}
2025-10-02 02:26:22.928  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:22.916 ‚è∞ Outbox message 25 scheduled for retry 3/5 in 1143ms
2025-10-02 02:26:22.928  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:22.916 [TERMINAL] OUTBOX_BACKOFF_SCHEDULED<3> id=1759352074717-6dpg1gf8due ts=2025-10-01T20:56:22.916Z
2025-10-02 02:26:22.929  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:22.916 üì¶ Processing outbox message 2/4 (ID: 27)
2025-10-02 02:26:22.929  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:22.916 [#27] attempt start (dk=d:839d1d4a-e72b-47bb-b74e-ef28a15f43ee:78045bbf-7474-46df-aac1-f34936b67d24:1759352137407-vbao54ka72f)
2025-10-02 02:26:22.929  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:22.916 [#27] requires_pseudonym=true  attempting upsert before send
2025-10-02 02:26:22.929  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:22.917 [#27] POST /messages (outbox fast-path)
2025-10-02 02:26:22.929  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:22.917 [outbox-27] stage: pre-network
2025-10-02 02:26:22.930  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:22.917 [outbox-27] fast-path: direct REST upsert -> https://sxykfyqrqwifkirveqgr.supabase.co/rest/v1/messages?on_conflict=dedupe_key&select=*,reactions(*),users!messages_user_id_fkey(display_name,avatar_url)
2025-10-02 02:26:22.930  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:22.917 [outbox-27] POST /messages (fast-path)
2025-10-02 02:26:22.930  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:22.917 [outbox-27] stage: network attempt started (path=rest)
2025-10-02 02:26:23.282  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:23.277 ‚ùå Outbox message 27 failed: Error: REST upsert failed: 403 {"code":"42501","details":null,"hint":null,"message":"new row violates row-level security policy (USING expression) for table \"messages\""}
                                                                                                    Error: REST upsert failed: 403 {"code":"42501","details":null,"hint":null,"message":"new row violates row-level security policy (USING expression) for table \"messages\""}
                                                                                                        at Nl.fastPathDirectUpsert (https://localhost/assets/index-Cj_V1rE1.js:359:3396)
                                                                                                        at async Nl.processOutbox (https://localhost/assets/index-Cj_V1rE1.js:359:8751)
2025-10-02 02:26:23.296  7026-7026  Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 46355841, pluginId: CapacitorSQLite, methodName: run
2025-10-02 02:26:23.296  7026-7026  Capacitor               com.confessr.app                     V  callback: 46355841, pluginId: CapacitorSQLite, methodName: run, methodData: {"database":"confessr_db","statement":"\n      UPDATE outbox \n      SET retry_count = ?, next_retry_at = ? \n      WHERE id = ?\n    ","values":[2,1759352184462,27],"transaction":true,"readonly":false,"returnMode":"no","isSQL92":true}
2025-10-02 02:26:23.321  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:23.308 ‚è∞ Outbox message 27 scheduled for retry 2/5 in 1184ms
2025-10-02 02:26:23.321  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:23.308 [TERMINAL] OUTBOX_BACKOFF_SCHEDULED<2> id=1759352137407-vbao54ka72f ts=2025-10-01T20:56:23.308Z
2025-10-02 02:26:23.322  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:23.308 üì¶ Processing outbox message 3/4 (ID: 28)
2025-10-02 02:26:23.322  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:23.308 [#28] attempt start (dk=d:839d1d4a-e72b-47bb-b74e-ef28a15f43ee:78045bbf-7474-46df-aac1-f34936b67d24:1759352177188-kuemkivpjgm)
2025-10-02 02:26:23.323  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:23.308 [#28] requires_pseudonym=true  attempting upsert before send
2025-10-02 02:26:23.323  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:23.308 [#28] POST /messages (outbox fast-path)
2025-10-02 02:26:23.324  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:23.308 [outbox-28] stage: pre-network
2025-10-02 02:26:23.324  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:23.309 [outbox-28] fast-path: direct REST upsert -> https://sxykfyqrqwifkirveqgr.supabase.co/rest/v1/messages?on_conflict=dedupe_key&select=*,reactions(*),users!messages_user_id_fkey(display_name,avatar_url)
2025-10-02 02:26:23.325  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:23.309 [outbox-28] POST /messages (fast-path)
2025-10-02 02:26:23.325  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:23.309 [outbox-28] stage: network attempt started (path=rest)
2025-10-02 02:26:23.530  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:23.529 [outbox-28] fast-path: direct REST upsert successful
2025-10-02 02:26:23.543  7026-7026  Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 46355842, pluginId: CapacitorSQLite, methodName: run
2025-10-02 02:26:23.543  7026-7026  Capacitor               com.confessr.app                     V  callback: 46355842, pluginId: CapacitorSQLite, methodName: run, methodData: {"database":"confessr_db","statement":"DELETE FROM outbox WHERE id = ?","values":[28],"transaction":true,"readonly":false,"returnMode":"no","isSQL92":true}
2025-10-02 02:26:23.599  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:23.583 ‚úÖ Outbox item delivered‚Üídeleted id=28 (dedupe_key=d:839d1d4a-e72b-47bb-b74e-ef28a15f43ee:78045bbf-7474-46df-aac1-f34936b67d24:1759352177188-kuemkivpjgm)
2025-10-02 02:26:23.599  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:23.584 [TERMINAL] OUTBOX_DELIVERED id=1759352177188-kuemkivpjgm ts=2025-10-01T20:56:23.584Z
2025-10-02 02:26:23.599  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:23.584 üîë getClient() called - hasClient=true isInitialized=true initPromiseActive=false
2025-10-02 02:26:23.600  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:23.584 [supabase-pipeline] push-fanout call: origin=https://localhost headers=[Content-Type,apikey,Authorization]
2025-10-02 02:26:23.628  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 386 - Msg: [realtime-v2] üì® Realtime INSERT received: id=2dc401d8-509e-4e82-8fbe-7045d80e824a, content="Slow...", user=839d1d4a-e72b-47bb-b74e-ef28a15f43ee, dedupe=d:839d1d4a-e72b-47bb-b74e-ef28a15f43ee:78045bbf-7474-46df-aac1-f34936b67d24:1759352177188-kuemkivpjgm
2025-10-02 02:26:23.706  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 386 - Msg: [realtime-v2] üì® Built message from row: id=2dc401d8-509e-4e82-8fbe-7045d80e824a, delivery_status=delivered
2025-10-02 02:26:23.707  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 386 - Msg: üì® attachMessageToState: action=replaced-by-dedupe, id=2dc401d8-509e-4e82-8fbe-7045d80e824a, before=18, after=18
2025-10-02 02:26:23.707  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 362 - Msg: üì¶ MessageCache: CACHED 10 messages for group 78045bbf-7474-46df-aac1-f34936b67d24
2025-10-02 02:26:23.708  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 386 - Msg: üì¶ MessageCache updated for group 78045bbf-7474-46df-aac1-f34936b67d24 after realtime insert (18 messages)
2025-10-02 02:26:23.708  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 386 - Msg: [realtime-v2] üì® Message attached to state: id=2dc401d8-509e-4e82-8fbe-7045d80e824a
2025-10-02 02:26:23.740  7026-7026  Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 46355843, pluginId: CapacitorSQLite, methodName: run
2025-10-02 02:26:23.740  7026-7026  Capacitor               com.confessr.app                     V  callback: 46355843, pluginId: CapacitorSQLite, methodName: run, methodData: {"database":"confessr_db","statement":"INSERT OR REPLACE INTO messages\n       (id, group_id, user_id, content, is_ghost, message_type, category, parent_id, image_url, created_at, updated_at, deleted_at)\n       VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?);","values":["2dc401d8-509e-4e82-8fbe-7045d80e824a","78045bbf-7474-46df-aac1-f34936b67d24","839d1d4a-e72b-47bb-b74e-ef28a15f43ee","Slow",1,"text",null,null,null,1759352183483,null,null],"transaction":true,"readonly":false,"returnMode":"no","isSQL92":true}
2025-10-02 02:26:23.770  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 386 - Msg: [realtime-v2] üì® Message persisted to SQLite: id=2dc401d8-509e-4e82-8fbe-7045d80e824a
2025-10-02 02:26:23.774  7026-7026  Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 46355844, pluginId: CapacitorSQLite, methodName: run
2025-10-02 02:26:23.775  7026-7026  Capacitor               com.confessr.app                     V  callback: 46355844, pluginId: CapacitorSQLite, methodName: run, methodData: {"database":"confessr_db","statement":"UPDATE groups SET last_sync_timestamp = ? WHERE id = ?","values":[1759352183757,"78045bbf-7474-46df-aac1-f34936b67d24"],"transaction":true,"readonly":false,"returnMode":"no","isSQL92":true}
2025-10-02 02:26:24.347  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:24.343 [supabase-pipeline] push-fanout response: status=200
2025-10-02 02:26:24.348  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:24.343 üì¶ Processing outbox message 4/4 (ID: 29)
2025-10-02 02:26:24.348  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:24.344 [#29] attempt start (dk=d:839d1d4a-e72b-47bb-b74e-ef28a15f43ee:78045bbf-7474-46df-aac1-f34936b67d24:1759352177188-kuemkivpjgm)
2025-10-02 02:26:24.349  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:24.344 [#29] requires_pseudonym=true  attempting upsert before send
2025-10-02 02:26:24.349  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:24.344 [#29] POST /messages (outbox fast-path)
2025-10-02 02:26:24.350  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:24.344 [outbox-29] stage: pre-network
2025-10-02 02:26:24.350  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:24.344 [outbox-29] fast-path: direct REST upsert -> https://sxykfyqrqwifkirveqgr.supabase.co/rest/v1/messages?on_conflict=dedupe_key&select=*,reactions(*),users!messages_user_id_fkey(display_name,avatar_url)
2025-10-02 02:26:24.351  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:24.344 [outbox-29] POST /messages (fast-path)
2025-10-02 02:26:24.351  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:24.345 [outbox-29] stage: network attempt started (path=rest)
2025-10-02 02:26:24.623  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:24.621 ‚ùå Outbox message 29 failed: Error: REST upsert failed: 403 {"code":"42501","details":null,"hint":null,"message":"new row violates row-level security policy (USING expression) for table \"messages\""}
                                                                                                    Error: REST upsert failed: 403 {"code":"42501","details":null,"hint":null,"message":"new row violates row-level security policy (USING expression) for table \"messages\""}
                                                                                                        at Nl.fastPathDirectUpsert (https://localhost/assets/index-Cj_V1rE1.js:359:3396)
                                                                                                        at async Nl.processOutbox (https://localhost/assets/index-Cj_V1rE1.js:359:8751)
2025-10-02 02:26:24.625  7026-7026  Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 46355845, pluginId: CapacitorSQLite, methodName: run
2025-10-02 02:26:24.626  7026-7026  Capacitor               com.confessr.app                     V  callback: 46355845, pluginId: CapacitorSQLite, methodName: run, methodData: {"database":"confessr_db","statement":"\n      UPDATE outbox \n      SET retry_count = ?, next_retry_at = ? \n      WHERE id = ?\n    ","values":[1,1759352185952,29],"transaction":true,"readonly":false,"returnMode":"no","isSQL92":true}
2025-10-02 02:26:24.638  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:24.637 ‚è∞ Outbox message 29 scheduled for retry 1/5 in 1331ms
2025-10-02 02:26:24.638  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:24.637 [TERMINAL] OUTBOX_BACKOFF_SCHEDULED<1> id=1759352177188-kuemkivpjgm ts=2025-10-01T20:56:24.637Z
2025-10-02 02:26:24.638  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:56:24.637 üì¶ Outbox processing complete - session outbox-1759352182519
2025-10-02 02:27:22.801  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 728 - Msg: üì§ Send button clicked, processing message... [object Object]
2025-10-02 02:27:22.801  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 728 - Msg: üì§ About to send message: [object Object]
2025-10-02 02:27:22.801  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 386 - Msg: üì§ sendMessage called: [object Object]
2025-10-02 02:27:22.802  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 728 - Msg: ‚úÖ Message dispatched, clearing input
2025-10-02 02:27:22.802  7026-7026  Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 46355846, pluginId: Network, methodName: getStatus
2025-10-02 02:27:22.802  7026-7026  Capacitor               com.confessr.app                     V  callback: 46355846, pluginId: Network, methodName: getStatus, methodData: {}
2025-10-02 02:27:22.900  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 386 - Msg: üåê Network status: [object Object]
2025-10-02 02:27:22.940  7026-7026  Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 46355847, pluginId: CapacitorSQLite, methodName: run
2025-10-02 02:27:22.940  7026-7026  Capacitor               com.confessr.app                     V  callback: 46355847, pluginId: CapacitorSQLite, methodName: run, methodData: {"database":"confessr_db","statement":"INSERT OR REPLACE INTO messages\n       (id, group_id, user_id, content, is_ghost, message_type, category, parent_id, image_url, created_at, updated_at, deleted_at)\n       VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?);","values":["1759352242832-jd9zeegkhge","78045bbf-7474-46df-aac1-f34936b67d24","839d1d4a-e72b-47bb-b74e-ef28a15f43ee","How ithe hott engin tu je eh he tho",1,"text",null,null,null,1759352242833,null,null],"transaction":true,"readonly":false,"returnMode":"no","isSQL92":true}
2025-10-02 02:27:23.017  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:23.006 üì§ Sending message 1759352242832-jd9zeegkhge...
2025-10-02 02:27:23.017  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:23.006 [send-1759352242832-jd9zeegkhge] stage: entered send
2025-10-02 02:27:23.018  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:23.006 [send-1759352242832-jd9zeegkhge] input: group=78045bbf user=839d1d4a ghost=true type=text dedupe=true
2025-10-02 02:27:23.018  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:23.006 [send-1759352242832-jd9zeegkhge] checkHealth() -> start
2025-10-02 02:27:23.031  7026-7026  Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 46355848, pluginId: Network, methodName: getStatus
2025-10-02 02:27:23.031  7026-7026  Capacitor               com.confessr.app                     V  callback: 46355848, pluginId: Network, methodName: getStatus, methodData: {}
2025-10-02 02:27:23.065  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:23.049 üåê Network state: online=true webViewReady=true type=cellular
2025-10-02 02:27:23.065  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:23.050 üè• Health check: starting (online=true webViewReady=true)
2025-10-02 02:27:23.065  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:23.050 üè• Health check: using cached access token (healthy)
2025-10-02 02:27:23.065  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:23.050 [send-1759352242832-jd9zeegkhge] checkHealth() -> healthy
2025-10-02 02:27:23.065  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:23.050 [send-1759352242832-jd9zeegkhge] stage: health ok
2025-10-02 02:27:23.065  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:23.050 üì§ Direct send attempt 1/3 - message 1759352242832-jd9zeegkhge
2025-10-02 02:27:23.065  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:23.050 [send-1759352242832-jd9zeegkhge] stage: pre-network
2025-10-02 02:27:23.065  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:23.050 [send-1759352242832-jd9zeegkhge] pre-network: acquiring full client (‚â§5000ms)
2025-10-02 02:27:23.065  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:23.050 üîë getClient() called - hasClient=true isInitialized=true initPromiseActive=false
2025-10-02 02:27:28.078  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:28.050 [send-1759352242832-jd9zeegkhge] Direct send timeout after 5000ms ‚Üí enqueued to outbox
2025-10-02 02:27:28.078  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:28.051 [send-1759352242832-jd9zeegkhge] fallbackToOutbox(): waited sqliteReady in 1ms
2025-10-02 02:27:28.114  7026-7026  Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 46355849, pluginId: CapacitorSQLite, methodName: run
2025-10-02 02:27:28.114  7026-7026  Capacitor               com.confessr.app                     V  callback: 46355849, pluginId: CapacitorSQLite, methodName: run, methodData: {"database":"confessr_db","statement":"\n      INSERT INTO outbox (group_id, user_id, content, retry_count, next_retry_at)\n      VALUES (?, ?, ?, ?, ?)\n    ","values":["78045bbf-7474-46df-aac1-f34936b67d24","839d1d4a-e72b-47bb-b74e-ef28a15f43ee","{\"id\":\"1759352242832-jd9zeegkhge\",\"content\":\"How ithe hott engin tu je eh he tho\",\"is_ghost\":true,\"message_type\":\"text\",\"category\":null,\"parent_id\":null,\"image_url\":null,\"dedupe_key\":\"d:839d1d4a-e72b-47bb-b74e-ef28a15f43ee:78045bbf-7474-46df-aac1-f34936b67d24:1759352242832-jd9zeegkhge\",\"requires_pseudonym\":true}",0,1759352248051],"transaction":true,"readonly":false,"returnMode":"no","isSQL92":true}
2025-10-02 02:27:28.168  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:28.138 üì¶ Message 1759352242832-jd9zeegkhge stored in outbox (dedupe_key=d:839d1d4a-e72b-47bb-b74e-ef28a15f43ee:78045bbf-7474-46df-aac1-f34936b67d24:1759352242832-jd9zeegkhge)
2025-10-02 02:27:28.169  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:28.138 üì¶ Triggering outbox processing from: pipeline-fallback
2025-10-02 02:27:28.169  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:28.138 ‚ùå Direct send attempt 1 failed - message 1759352242832-jd9zeegkhge: MessageQueuedError: Message 1759352242832-jd9zeegkhge queued to outbox (pre-network timeout)
                                                                                                    MessageQueuedError: Message 1759352242832-jd9zeegkhge queued to outbox (pre-network timeout)
                                                                                                        at Nl.sendMessageInternal (https://localhost/assets/index-Cj_V1rE1.js:355:4983)
                                                                                                        at async Nl.sendMessage (https://localhost/assets/index-Cj_V1rE1.js:355:2609)
                                                                                                        at async sendMessage (https://localhost/assets/index-Cj_V1rE1.js:386:32893)
2025-10-02 02:27:28.169  7026-7026  Capacitor/Console       com.confessr.app                     D  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [send-1759352242832-jd9zeegkhge] attempt-1: 5088.649169921875 ms
2025-10-02 02:27:28.169  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:28.138 [send-1759352242832-jd9zeegkhge] immediate fallback due to error="Message 1759352242832-jd9zeegkhge queued to outbox (pre-network timeout)" at 2025-10-01T20:57:28.138Z
2025-10-02 02:27:28.169  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:28.139 [send-1759352242832-jd9zeegkhge] fallbackToOutbox(): waited sqliteReady in 0ms
2025-10-02 02:27:28.170  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:28.141 üì¶ Starting outbox processing - session outbox-1759352248141
2025-10-02 02:27:28.170  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:28.141 üì¶ Outbox pre-check: sqliteReady after 0ms
2025-10-02 02:27:28.194  7026-7026  Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 46355850, pluginId: CapacitorSQLite, methodName: run
2025-10-02 02:27:28.194  7026-7026  Capacitor               com.confessr.app                     V  callback: 46355850, pluginId: CapacitorSQLite, methodName: run, methodData: {"database":"confessr_db","statement":"\n      INSERT INTO outbox (group_id, user_id, content, retry_count, next_retry_at)\n      VALUES (?, ?, ?, ?, ?)\n    ","values":["78045bbf-7474-46df-aac1-f34936b67d24","839d1d4a-e72b-47bb-b74e-ef28a15f43ee","{\"id\":\"1759352242832-jd9zeegkhge\",\"content\":\"How ithe hott engin tu je eh he tho\",\"is_ghost\":true,\"message_type\":\"text\",\"category\":null,\"parent_id\":null,\"image_url\":null,\"dedupe_key\":\"d:839d1d4a-e72b-47bb-b74e-ef28a15f43ee:78045bbf-7474-46df-aac1-f34936b67d24:1759352242832-jd9zeegkhge\",\"requires_pseudonym\":true}",0,1759352248139],"transaction":true,"readonly":false,"returnMode":"no","isSQL92":true}
2025-10-02 02:27:28.196  7026-7026  Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 46355851, pluginId: CapacitorSQLite, methodName: query
2025-10-02 02:27:28.197  7026-7026  Capacitor               com.confessr.app                     V  callback: 46355851, pluginId: CapacitorSQLite, methodName: query, methodData: {"database":"confessr_db","statement":"\n      SELECT * FROM outbox \n      WHERE next_retry_at <= ? \n      ORDER BY next_retry_at ASC\n    ","values":[1759352248141],"readonly":false,"isSQL92":true}
2025-10-02 02:27:28.245  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:28.216 üì¶ Message 1759352242832-jd9zeegkhge stored in outbox (dedupe_key=d:839d1d4a-e72b-47bb-b74e-ef28a15f43ee:78045bbf-7474-46df-aac1-f34936b67d24:1759352242832-jd9zeegkhge)
2025-10-02 02:27:28.245  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:28.216 üì¶ Trigger coalesced (debounced 300ms) from: pipeline-fallback
2025-10-02 02:27:28.245  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:28.216 üì¶ Message 1759352242832-jd9zeegkhge queued to outbox
2025-10-02 02:27:28.245  7026-7026  Capacitor/Console       com.confessr.app                     D  File: https://localhost/assets/index-Cj_V1rE1.js - Line 355 - Msg: [send-1759352242832-jd9zeegkhge] total: 5210.280029296875 ms
2025-10-02 02:27:28.245  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:28.216 [send-1759352242832-jd9zeegkhge] finished
2025-10-02 02:27:28.246  7026-7026  Capacitor/Console       com.confessr.app                     E  File: https://localhost/assets/index-Cj_V1rE1.js - Line 386 - Msg: üì§ Pipeline send outcome for message: 1759352242832-jd9zeegkhge MessageQueuedError: Message 1759352242832-jd9zeegkhge queued to outbox (direct send error)
2025-10-02 02:27:28.246  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 386 - Msg: üì¶ Message queued to outbox; keeping delivery_status as sending
2025-10-02 02:27:28.246  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:28.217 üì¶ non-empty: start (5)
2025-10-02 02:27:28.272  7026-7026  Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 46355852, pluginId: Network, methodName: getStatus
2025-10-02 02:27:28.272  7026-7026  Capacitor               com.confessr.app                     V  callback: 46355852, pluginId: Network, methodName: getStatus, methodData: {}
2025-10-02 02:27:28.316  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:28.295 üåê Network state: online=true webViewReady=true type=cellular
2025-10-02 02:27:28.316  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:28.296 üè• Health check: starting (online=true webViewReady=true)
2025-10-02 02:27:28.316  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:28.296 üè• Health check: using cached access token (healthy)
2025-10-02 02:27:28.316  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:28.296 üîë getClient() called - hasClient=true isInitialized=true initPromiseActive=false
2025-10-02 02:27:28.316  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:28.296 üì¶ Processing outbox message 1/5 (ID: 25)
2025-10-02 02:27:28.316  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:28.296 [#25] attempt start (dk=d:839d1d4a-e72b-47bb-b74e-ef28a15f43ee:78045bbf-7474-46df-aac1-f34936b67d24:1759352074717-6dpg1gf8due)
2025-10-02 02:27:28.316  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:28.296 [#25] requires_pseudonym=true  attempting upsert before send
2025-10-02 02:27:28.316  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:28.296 [#25] POST /messages (outbox fast-path)
2025-10-02 02:27:28.316  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:28.297 [outbox-25] stage: pre-network
2025-10-02 02:27:28.316  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:28.297 [outbox-25] fast-path: direct REST upsert -> https://sxykfyqrqwifkirveqgr.supabase.co/rest/v1/messages?on_conflict=dedupe_key&select=*,reactions(*),users!messages_user_id_fkey(display_name,avatar_url)
2025-10-02 02:27:28.317  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:28.297 [outbox-25] POST /messages (fast-path)
2025-10-02 02:27:28.317  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:28.297 [outbox-25] stage: network attempt started (path=rest)
2025-10-02 02:27:28.580  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:28.560 ‚ùå Outbox message 25 failed: Error: REST upsert failed: 403 {"code":"42501","details":null,"hint":null,"message":"new row violates row-level security policy (USING expression) for table \"messages\""}
                                                                                                    Error: REST upsert failed: 403 {"code":"42501","details":null,"hint":null,"message":"new row violates row-level security policy (USING expression) for table \"messages\""}
                                                                                                        at Nl.fastPathDirectUpsert (https://localhost/assets/index-Cj_V1rE1.js:359:3396)
                                                                                                        at async Nl.processOutbox (https://localhost/assets/index-Cj_V1rE1.js:359:8751)
2025-10-02 02:27:28.601  7026-7026  Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 46355853, pluginId: CapacitorSQLite, methodName: run
2025-10-02 02:27:28.601  7026-7026  Capacitor               com.confessr.app                     V  callback: 46355853, pluginId: CapacitorSQLite, methodName: run, methodData: {"database":"confessr_db","statement":"\n      UPDATE outbox \n      SET retry_count = ?, next_retry_at = ? \n      WHERE id = ?\n    ","values":[4,1759352250388,25],"transaction":true,"readonly":false,"returnMode":"no","isSQL92":true}
2025-10-02 02:27:28.658  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:28.633 ‚è∞ Outbox message 25 scheduled for retry 4/5 in 1828ms
2025-10-02 02:27:28.658  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:28.633 [TERMINAL] OUTBOX_BACKOFF_SCHEDULED<4> id=1759352074717-6dpg1gf8due ts=2025-10-01T20:57:28.633Z
2025-10-02 02:27:28.659  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:28.633 üì¶ Processing outbox message 2/5 (ID: 27)
2025-10-02 02:27:28.659  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:28.633 [#27] attempt start (dk=d:839d1d4a-e72b-47bb-b74e-ef28a15f43ee:78045bbf-7474-46df-aac1-f34936b67d24:1759352137407-vbao54ka72f)
2025-10-02 02:27:28.659  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:28.633 [#27] requires_pseudonym=true  attempting upsert before send
2025-10-02 02:27:28.660  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:28.634 [#27] POST /messages (outbox fast-path)
2025-10-02 02:27:28.660  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:28.634 [outbox-27] stage: pre-network
2025-10-02 02:27:28.660  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:28.634 [outbox-27] fast-path: direct REST upsert -> https://sxykfyqrqwifkirveqgr.supabase.co/rest/v1/messages?on_conflict=dedupe_key&select=*,reactions(*),users!messages_user_id_fkey(display_name,avatar_url)
2025-10-02 02:27:28.660  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:28.634 [outbox-27] POST /messages (fast-path)
2025-10-02 02:27:28.661  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:28.634 [outbox-27] stage: network attempt started (path=rest)
2025-10-02 02:27:28.904  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:28.889 ‚ùå Outbox message 27 failed: Error: REST upsert failed: 403 {"code":"42501","details":null,"hint":null,"message":"new row violates row-level security policy (USING expression) for table \"messages\""}
                                                                                                    Error: REST upsert failed: 403 {"code":"42501","details":null,"hint":null,"message":"new row violates row-level security policy (USING expression) for table \"messages\""}
                                                                                                        at Nl.fastPathDirectUpsert (https://localhost/assets/index-Cj_V1rE1.js:359:3396)
                                                                                                        at async Nl.processOutbox (https://localhost/assets/index-Cj_V1rE1.js:359:8751)
2025-10-02 02:27:28.928  7026-7026  Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 46355854, pluginId: CapacitorSQLite, methodName: run
2025-10-02 02:27:28.928  7026-7026  Capacitor               com.confessr.app                     V  callback: 46355854, pluginId: CapacitorSQLite, methodName: run, methodData: {"database":"confessr_db","statement":"\n      UPDATE outbox \n      SET retry_count = ?, next_retry_at = ? \n      WHERE id = ?\n    ","values":[3,1759352251306,27],"transaction":true,"readonly":false,"returnMode":"no","isSQL92":true}
2025-10-02 02:27:28.972  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:28.954 ‚è∞ Outbox message 27 scheduled for retry 3/5 in 2416ms
2025-10-02 02:27:28.972  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:28.954 [TERMINAL] OUTBOX_BACKOFF_SCHEDULED<3> id=1759352137407-vbao54ka72f ts=2025-10-01T20:57:28.954Z
2025-10-02 02:27:28.972  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:28.954 üì¶ Processing outbox message 3/5 (ID: 29)
2025-10-02 02:27:28.973  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:28.954 [#29] attempt start (dk=d:839d1d4a-e72b-47bb-b74e-ef28a15f43ee:78045bbf-7474-46df-aac1-f34936b67d24:1759352177188-kuemkivpjgm)
2025-10-02 02:27:28.973  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:28.954 [#29] requires_pseudonym=true  attempting upsert before send
2025-10-02 02:27:28.973  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:28.954 [#29] POST /messages (outbox fast-path)
2025-10-02 02:27:28.973  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:28.955 [outbox-29] stage: pre-network
2025-10-02 02:27:28.973  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:28.955 [outbox-29] fast-path: direct REST upsert -> https://sxykfyqrqwifkirveqgr.supabase.co/rest/v1/messages?on_conflict=dedupe_key&select=*,reactions(*),users!messages_user_id_fkey(display_name,avatar_url)
2025-10-02 02:27:28.974  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:28.955 [outbox-29] POST /messages (fast-path)
2025-10-02 02:27:28.974  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:28.955 [outbox-29] stage: network attempt started (path=rest)
2025-10-02 02:27:29.182  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:29.164 ‚ùå Outbox message 29 failed: Error: REST upsert failed: 403 {"code":"42501","details":null,"hint":null,"message":"new row violates row-level security policy (USING expression) for table \"messages\""}
                                                                                                    Error: REST upsert failed: 403 {"code":"42501","details":null,"hint":null,"message":"new row violates row-level security policy (USING expression) for table \"messages\""}
                                                                                                        at Nl.fastPathDirectUpsert (https://localhost/assets/index-Cj_V1rE1.js:359:3396)
                                                                                                        at async Nl.processOutbox (https://localhost/assets/index-Cj_V1rE1.js:359:8751)
2025-10-02 02:27:29.205  7026-7026  Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 46355855, pluginId: CapacitorSQLite, methodName: run
2025-10-02 02:27:29.205  7026-7026  Capacitor               com.confessr.app                     V  callback: 46355855, pluginId: CapacitorSQLite, methodName: run, methodData: {"database":"confessr_db","statement":"\n      UPDATE outbox \n      SET retry_count = ?, next_retry_at = ? \n      WHERE id = ?\n    ","values":[2,1759352251424,29],"transaction":true,"readonly":false,"returnMode":"no","isSQL92":true}
2025-10-02 02:27:29.242  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:29.228 ‚è∞ Outbox message 29 scheduled for retry 2/5 in 2259ms
2025-10-02 02:27:29.242  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:29.228 [TERMINAL] OUTBOX_BACKOFF_SCHEDULED<2> id=1759352177188-kuemkivpjgm ts=2025-10-01T20:57:29.228Z
2025-10-02 02:27:29.242  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:29.228 üì¶ Processing outbox message 4/5 (ID: 30)
2025-10-02 02:27:29.242  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:29.228 [#30] attempt start (dk=d:839d1d4a-e72b-47bb-b74e-ef28a15f43ee:78045bbf-7474-46df-aac1-f34936b67d24:1759352242832-jd9zeegkhge)
2025-10-02 02:27:29.242  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:29.228 [#30] requires_pseudonym=true  attempting upsert before send
2025-10-02 02:27:29.242  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:29.228 [#30] POST /messages (outbox fast-path)
2025-10-02 02:27:29.242  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:29.228 [outbox-30] stage: pre-network
2025-10-02 02:27:29.242  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:29.228 [outbox-30] fast-path: direct REST upsert -> https://sxykfyqrqwifkirveqgr.supabase.co/rest/v1/messages?on_conflict=dedupe_key&select=*,reactions(*),users!messages_user_id_fkey(display_name,avatar_url)
2025-10-02 02:27:29.243  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:29.228 [outbox-30] POST /messages (fast-path)
2025-10-02 02:27:29.243  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:29.228 [outbox-30] stage: network attempt started (path=rest)
2025-10-02 02:27:29.456  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:29.444 [outbox-30] fast-path: direct REST upsert successful
2025-10-02 02:27:29.476  7026-7026  Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 46355856, pluginId: CapacitorSQLite, methodName: run
2025-10-02 02:27:29.476  7026-7026  Capacitor               com.confessr.app                     V  callback: 46355856, pluginId: CapacitorSQLite, methodName: run, methodData: {"database":"confessr_db","statement":"DELETE FROM outbox WHERE id = ?","values":[30],"transaction":true,"readonly":false,"returnMode":"no","isSQL92":true}
2025-10-02 02:27:29.542  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:29.528 ‚úÖ Outbox item delivered‚Üídeleted id=30 (dedupe_key=d:839d1d4a-e72b-47bb-b74e-ef28a15f43ee:78045bbf-7474-46df-aac1-f34936b67d24:1759352242832-jd9zeegkhge)
2025-10-02 02:27:29.542  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:29.528 [TERMINAL] OUTBOX_DELIVERED id=1759352242832-jd9zeegkhge ts=2025-10-01T20:57:29.528Z
2025-10-02 02:27:29.542  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:29.528 üîë getClient() called - hasClient=true isInitialized=true initPromiseActive=false
2025-10-02 02:27:29.542  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:29.528 [supabase-pipeline] push-fanout call: origin=https://localhost headers=[Content-Type,apikey,Authorization]
2025-10-02 02:27:29.585  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 386 - Msg: [realtime-v2] üì® Realtime INSERT received: id=e3113fed-d833-4d62-95bf-ab7c3a280562, content="How ithe hott engin ...", user=839d1d4a-e72b-47bb-b74e-ef28a15f43ee, dedupe=d:839d1d4a-e72b-47bb-b74e-ef28a15f43ee:78045bbf-7474-46df-aac1-f34936b67d24:1759352242832-jd9zeegkhge
2025-10-02 02:27:29.646  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 386 - Msg: [realtime-v2] üì® Built message from row: id=e3113fed-d833-4d62-95bf-ab7c3a280562, delivery_status=delivered
2025-10-02 02:27:29.647  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 386 - Msg: üì® attachMessageToState: action=replaced-by-dedupe, id=e3113fed-d833-4d62-95bf-ab7c3a280562, before=19, after=19
2025-10-02 02:27:29.647  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 362 - Msg: üì¶ MessageCache: CACHED 10 messages for group 78045bbf-7474-46df-aac1-f34936b67d24
2025-10-02 02:27:29.647  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 386 - Msg: üì¶ MessageCache updated for group 78045bbf-7474-46df-aac1-f34936b67d24 after realtime insert (19 messages)
2025-10-02 02:27:29.648  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 386 - Msg: [realtime-v2] üì® Message attached to state: id=e3113fed-d833-4d62-95bf-ab7c3a280562
2025-10-02 02:27:29.708  7026-7026  Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 46355857, pluginId: CapacitorSQLite, methodName: run
2025-10-02 02:27:29.708  7026-7026  Capacitor               com.confessr.app                     V  callback: 46355857, pluginId: CapacitorSQLite, methodName: run, methodData: {"database":"confessr_db","statement":"INSERT OR REPLACE INTO messages\n       (id, group_id, user_id, content, is_ghost, message_type, category, parent_id, image_url, created_at, updated_at, deleted_at)\n       VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?);","values":["e3113fed-d833-4d62-95bf-ab7c3a280562","78045bbf-7474-46df-aac1-f34936b67d24","839d1d4a-e72b-47bb-b74e-ef28a15f43ee","How ithe hott engin tu je eh he tho",1,"text",null,null,null,1759352249405,null,null],"transaction":true,"readonly":false,"returnMode":"no","isSQL92":true}
2025-10-02 02:27:29.741  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 386 - Msg: [realtime-v2] üì® Message persisted to SQLite: id=e3113fed-d833-4d62-95bf-ab7c3a280562
2025-10-02 02:27:29.744  7026-7026  Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 46355858, pluginId: CapacitorSQLite, methodName: run
2025-10-02 02:27:29.744  7026-7026  Capacitor               com.confessr.app                     V  callback: 46355858, pluginId: CapacitorSQLite, methodName: run, methodData: {"database":"confessr_db","statement":"UPDATE groups SET last_sync_timestamp = ? WHERE id = ?","values":[1759352249740,"78045bbf-7474-46df-aac1-f34936b67d24"],"transaction":true,"readonly":false,"returnMode":"no","isSQL92":true}
2025-10-02 02:27:30.933  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:30.932 [supabase-pipeline] push-fanout response: status=200
2025-10-02 02:27:30.934  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:30.932 üì¶ Processing outbox message 5/5 (ID: 31)
2025-10-02 02:27:30.934  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:30.932 [#31] attempt start (dk=d:839d1d4a-e72b-47bb-b74e-ef28a15f43ee:78045bbf-7474-46df-aac1-f34936b67d24:1759352242832-jd9zeegkhge)
2025-10-02 02:27:30.934  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:30.932 [#31] requires_pseudonym=true  attempting upsert before send
2025-10-02 02:27:30.935  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:30.933 [#31] POST /messages (outbox fast-path)
2025-10-02 02:27:30.935  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:30.933 [outbox-31] stage: pre-network
2025-10-02 02:27:30.936  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:30.933 [outbox-31] fast-path: direct REST upsert -> https://sxykfyqrqwifkirveqgr.supabase.co/rest/v1/messages?on_conflict=dedupe_key&select=*,reactions(*),users!messages_user_id_fkey(display_name,avatar_url)
2025-10-02 02:27:30.936  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:30.933 [outbox-31] POST /messages (fast-path)
2025-10-02 02:27:30.936  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:30.933 [outbox-31] stage: network attempt started (path=rest)
2025-10-02 02:27:31.148  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:31.147 ‚ùå Outbox message 31 failed: Error: REST upsert failed: 403 {"code":"42501","details":null,"hint":null,"message":"new row violates row-level security policy (USING expression) for table \"messages\""}
                                                                                                    Error: REST upsert failed: 403 {"code":"42501","details":null,"hint":null,"message":"new row violates row-level security policy (USING expression) for table \"messages\""}
                                                                                                        at Nl.fastPathDirectUpsert (https://localhost/assets/index-Cj_V1rE1.js:359:3396)
                                                                                                        at async Nl.processOutbox (https://localhost/assets/index-Cj_V1rE1.js:359:8751)
2025-10-02 02:27:31.151  7026-7026  Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 46355859, pluginId: CapacitorSQLite, methodName: run
2025-10-02 02:27:31.151  7026-7026  Capacitor               com.confessr.app                     V  callback: 46355859, pluginId: CapacitorSQLite, methodName: run, methodData: {"database":"confessr_db","statement":"\n      UPDATE outbox \n      SET retry_count = ?, next_retry_at = ? \n      WHERE id = ?\n    ","values":[1,1759352252954,31],"transaction":true,"readonly":false,"returnMode":"no","isSQL92":true}
2025-10-02 02:27:31.167  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:31.165 ‚è∞ Outbox message 31 scheduled for retry 1/5 in 1807ms
2025-10-02 02:27:31.167  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:31.166 [TERMINAL] OUTBOX_BACKOFF_SCHEDULED<1> id=1759352242832-jd9zeegkhge ts=2025-10-01T20:57:31.166Z
2025-10-02 02:27:31.168  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:31.166 üì¶ Outbox processing complete - session outbox-1759352248141
2025-10-02 02:27:33.823  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 728 - Msg: üì§ Send button clicked, processing message... [object Object]
2025-10-02 02:27:33.825  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 728 - Msg: üì§ About to send message: [object Object]
2025-10-02 02:27:33.825  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 386 - Msg: üì§ sendMessage called: [object Object]
2025-10-02 02:27:33.826  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 728 - Msg: ‚úÖ Message dispatched, clearing input
2025-10-02 02:27:33.827  7026-7026  Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 46355860, pluginId: Network, methodName: getStatus
2025-10-02 02:27:33.827  7026-7026  Capacitor               com.confessr.app                     V  callback: 46355860, pluginId: Network, methodName: getStatus, methodData: {}
2025-10-02 02:27:33.846  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 386 - Msg: üåê Network status: [object Object]
2025-10-02 02:27:33.934  7026-7026  Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 46355861, pluginId: CapacitorSQLite, methodName: run
2025-10-02 02:27:33.934  7026-7026  Capacitor               com.confessr.app                     V  callback: 46355861, pluginId: CapacitorSQLite, methodName: run, methodData: {"database":"confessr_db","statement":"INSERT OR REPLACE INTO messages\n       (id, group_id, user_id, content, is_ghost, message_type, category, parent_id, image_url, created_at, updated_at, deleted_at)\n       VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?);","values":["1759352253846-kah9mrja1c","78045bbf-7474-46df-aac1-f34936b67d24","839d1d4a-e72b-47bb-b74e-ef28a15f43ee","Cybuni",1,"text",null,null,null,1759352253846,null,null],"transaction":true,"readonly":false,"returnMode":"no","isSQL92":true}
2025-10-02 02:27:34.051  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:34.040 üì§ Sending message 1759352253846-kah9mrja1c...
2025-10-02 02:27:34.051  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:34.040 [send-1759352253846-kah9mrja1c] stage: entered send
2025-10-02 02:27:34.051  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:34.040 [send-1759352253846-kah9mrja1c] input: group=78045bbf user=839d1d4a ghost=true type=text dedupe=true
2025-10-02 02:27:34.051  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:34.040 [send-1759352253846-kah9mrja1c] checkHealth() -> start
2025-10-02 02:27:34.066  7026-7026  Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 46355862, pluginId: Network, methodName: getStatus
2025-10-02 02:27:34.066  7026-7026  Capacitor               com.confessr.app                     V  callback: 46355862, pluginId: Network, methodName: getStatus, methodData: {}
2025-10-02 02:27:34.090  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:34.079 üåê Network state: online=true webViewReady=true type=cellular
2025-10-02 02:27:34.090  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:34.079 üè• Health check: starting (online=true webViewReady=true)
2025-10-02 02:27:34.090  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:34.079 üè• Health check: using cached access token (healthy)
2025-10-02 02:27:34.090  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:34.079 [send-1759352253846-kah9mrja1c] checkHealth() -> healthy
2025-10-02 02:27:34.090  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:34.079 [send-1759352253846-kah9mrja1c] stage: health ok
2025-10-02 02:27:34.090  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:34.079 üì§ Direct send attempt 1/3 - message 1759352253846-kah9mrja1c
2025-10-02 02:27:34.090  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:34.079 [send-1759352253846-kah9mrja1c] stage: pre-network
2025-10-02 02:27:34.090  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:34.080 [send-1759352253846-kah9mrja1c] pre-network: acquiring full client (‚â§5000ms)
2025-10-02 02:27:34.090  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:34.080 üîë getClient() called - hasClient=true isInitialized=true initPromiseActive=false
2025-10-02 02:27:34.091  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:34.080 [send-1759352253846-kah9mrja1c] using full client
2025-10-02 02:27:34.091  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:34.080 [send-1759352253846-kah9mrja1c] auth: using cached token snapshot=true
2025-10-02 02:27:34.091  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:34.080 [send-1759352253846-kah9mrja1c] postgrest present=true hasAuthFn=false
2025-10-02 02:27:34.091  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:34.080 [send-1759352253846-kah9mrja1c] fast-path: using direct REST upsert (snapshot token)
2025-10-02 02:27:34.091  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:34.080 [send-1759352253846-kah9mrja1c] stage: network attempt started (path=rest)
2025-10-02 02:27:34.091  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:34.080 [send-1759352253846-kah9mrja1c] POST /messages (fast-path)
2025-10-02 02:27:34.091  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:34.080 [send-1759352253846-kah9mrja1c] stage: pre-network
2025-10-02 02:27:34.091  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:34.080 [send-1759352253846-kah9mrja1c] fast-path: direct REST upsert -> https://sxykfyqrqwifkirveqgr.supabase.co/rest/v1/messages?on_conflict=dedupe_key&select=*,reactions(*),users!messages_user_id_fkey(display_name,avatar_url)
2025-10-02 02:27:34.091  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:34.080 [send-1759352253846-kah9mrja1c] POST /messages (fast-path)
2025-10-02 02:27:34.091  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:34.080 [send-1759352253846-kah9mrja1c] stage: network attempt started (path=rest)
2025-10-02 02:27:34.313  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:34.297 [send-1759352253846-kah9mrja1c] fast-path: direct REST upsert successful
2025-10-02 02:27:34.313  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:34.298 [send-1759352253846-kah9mrja1c] stage: response received
2025-10-02 02:27:34.313  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:34.298 ‚úÖ Direct send successful - message 1759352253846-kah9mrja1c
2025-10-02 02:27:34.313  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:34.298 [TERMINAL] DIRECT_SUCCESS id=1759352253846-kah9mrja1c ts=2025-10-01T20:57:34.298Z
2025-10-02 02:27:34.313  7026-7026  Capacitor/Console       com.confessr.app                     D  File: https://localhost/assets/index-Cj_V1rE1.js - Line 355 - Msg: [send-1759352253846-kah9mrja1c] attempt-1: 218.8310546875 ms
2025-10-02 02:27:34.314  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:34.298 ‚úÖ Message 1759352253846-kah9mrja1c sent successfully
2025-10-02 02:27:34.314  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:34.299 [supabase-pipeline] push-fanout call: origin=https://localhost headers=[Content-Type,apikey,Authorization]
2025-10-02 02:27:34.476  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 386 - Msg: [realtime-v2] üì® Realtime INSERT received: id=3817cff9-d132-47b6-837b-bab5c6fa1d7d, content="Cybuni...", user=839d1d4a-e72b-47bb-b74e-ef28a15f43ee, dedupe=d:839d1d4a-e72b-47bb-b74e-ef28a15f43ee:78045bbf-7474-46df-aac1-f34936b67d24:1759352253846-kah9mrja1c
2025-10-02 02:27:34.577  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 386 - Msg: [realtime-v2] üì® Built message from row: id=3817cff9-d132-47b6-837b-bab5c6fa1d7d, delivery_status=delivered
2025-10-02 02:27:34.577  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 386 - Msg: üì® attachMessageToState: action=replaced-by-dedupe, id=3817cff9-d132-47b6-837b-bab5c6fa1d7d, before=20, after=20
2025-10-02 02:27:34.578  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 362 - Msg: üì¶ MessageCache: CACHED 10 messages for group 78045bbf-7474-46df-aac1-f34936b67d24
2025-10-02 02:27:34.578  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 386 - Msg: üì¶ MessageCache updated for group 78045bbf-7474-46df-aac1-f34936b67d24 after realtime insert (20 messages)
2025-10-02 02:27:34.578  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 386 - Msg: [realtime-v2] üì® Message attached to state: id=3817cff9-d132-47b6-837b-bab5c6fa1d7d
2025-10-02 02:27:34.653  7026-7026  Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 46355863, pluginId: CapacitorSQLite, methodName: run
2025-10-02 02:27:34.653  7026-7026  Capacitor               com.confessr.app                     V  callback: 46355863, pluginId: CapacitorSQLite, methodName: run, methodData: {"database":"confessr_db","statement":"INSERT OR REPLACE INTO messages\n       (id, group_id, user_id, content, is_ghost, message_type, category, parent_id, image_url, created_at, updated_at, deleted_at)\n       VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?);","values":["3817cff9-d132-47b6-837b-bab5c6fa1d7d","78045bbf-7474-46df-aac1-f34936b67d24","839d1d4a-e72b-47bb-b74e-ef28a15f43ee","Cybuni",1,"text",null,null,null,1759352254250,null,null],"transaction":true,"readonly":false,"returnMode":"no","isSQL92":true}
2025-10-02 02:27:34.678  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 386 - Msg: [realtime-v2] üì® Message persisted to SQLite: id=3817cff9-d132-47b6-837b-bab5c6fa1d7d
2025-10-02 02:27:34.679  7026-7026  Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 46355864, pluginId: CapacitorSQLite, methodName: run
2025-10-02 02:27:34.679  7026-7026  Capacitor               com.confessr.app                     V  callback: 46355864, pluginId: CapacitorSQLite, methodName: run, methodData: {"database":"confessr_db","statement":"UPDATE groups SET last_sync_timestamp = ? WHERE id = ?","values":[1759352254677,"78045bbf-7474-46df-aac1-f34936b67d24"],"transaction":true,"readonly":false,"returnMode":"no","isSQL92":true}
2025-10-02 02:27:35.682  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:35.681 [supabase-pipeline] push-fanout response: status=200
2025-10-02 02:27:35.683  7026-7026  Capacitor/Console       com.confessr.app                     D  File: https://localhost/assets/index-Cj_V1rE1.js - Line 355 - Msg: [send-1759352253846-kah9mrja1c] total: 1640.6611328125 ms
2025-10-02 02:27:35.683  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:35.681 [send-1759352253846-kah9mrja1c] finished
2025-10-02 02:27:45.227  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 728 - Msg: üì§ Send button clicked, processing message... [object Object]
2025-10-02 02:27:45.229  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 728 - Msg: üì§ About to send message: [object Object]
2025-10-02 02:27:45.230  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 386 - Msg: üì§ sendMessage called: [object Object]
2025-10-02 02:27:45.230  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 728 - Msg: ‚úÖ Message dispatched, clearing input
2025-10-02 02:27:45.231  7026-7026  Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 46355865, pluginId: Network, methodName: getStatus
2025-10-02 02:27:45.231  7026-7026  Capacitor               com.confessr.app                     V  callback: 46355865, pluginId: Network, methodName: getStatus, methodData: {}
2025-10-02 02:27:45.245  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 386 - Msg: üåê Network status: [object Object]
2025-10-02 02:27:45.328  7026-7026  Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 46355866, pluginId: CapacitorSQLite, methodName: run
2025-10-02 02:27:45.329  7026-7026  Capacitor               com.confessr.app                     V  callback: 46355866, pluginId: CapacitorSQLite, methodName: run, methodData: {"database":"confessr_db","statement":"INSERT OR REPLACE INTO messages\n       (id, group_id, user_id, content, is_ghost, message_type, category, parent_id, image_url, created_at, updated_at, deleted_at)\n       VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?);","values":["1759352265240-7x54rgwkp3e","78045bbf-7474-46df-aac1-f34936b67d24","839d1d4a-e72b-47bb-b74e-ef28a15f43ee","Tu ubcub8",1,"text",null,null,null,1759352265240,null,null],"transaction":true,"readonly":false,"returnMode":"no","isSQL92":true}
2025-10-02 02:27:45.453  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:45.439 üì§ Sending message 1759352265240-7x54rgwkp3e...
2025-10-02 02:27:45.454  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:45.439 [send-1759352265240-7x54rgwkp3e] stage: entered send
2025-10-02 02:27:45.454  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:45.439 [send-1759352265240-7x54rgwkp3e] input: group=78045bbf user=839d1d4a ghost=true type=text dedupe=true
2025-10-02 02:27:45.454  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:45.439 [send-1759352265240-7x54rgwkp3e] checkHealth() -> start
2025-10-02 02:27:45.475  7026-7026  Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 46355867, pluginId: Network, methodName: getStatus
2025-10-02 02:27:45.476  7026-7026  Capacitor               com.confessr.app                     V  callback: 46355867, pluginId: Network, methodName: getStatus, methodData: {}
2025-10-02 02:27:45.516  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:45.496 üåê Network state: online=true webViewReady=true type=cellular
2025-10-02 02:27:45.516  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:45.496 üè• Health check: starting (online=true webViewReady=true)
2025-10-02 02:27:45.516  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:45.496 üè• Health check: using cached access token (healthy)
2025-10-02 02:27:45.516  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:45.496 [send-1759352265240-7x54rgwkp3e] checkHealth() -> healthy
2025-10-02 02:27:45.517  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:45.496 [send-1759352265240-7x54rgwkp3e] stage: health ok
2025-10-02 02:27:45.517  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:45.496 üì§ Direct send attempt 1/3 - message 1759352265240-7x54rgwkp3e
2025-10-02 02:27:45.517  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:45.496 [send-1759352265240-7x54rgwkp3e] stage: pre-network
2025-10-02 02:27:45.517  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:45.496 [send-1759352265240-7x54rgwkp3e] pre-network: acquiring full client (‚â§5000ms)
2025-10-02 02:27:45.517  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:45.496 üîë getClient() called - hasClient=true isInitialized=true initPromiseActive=false
2025-10-02 02:27:45.517  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:45.496 [send-1759352265240-7x54rgwkp3e] using full client
2025-10-02 02:27:45.518  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:45.496 [send-1759352265240-7x54rgwkp3e] auth: using cached token snapshot=true
2025-10-02 02:27:45.518  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:45.496 [send-1759352265240-7x54rgwkp3e] postgrest present=true hasAuthFn=false
2025-10-02 02:27:45.518  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:45.496 [send-1759352265240-7x54rgwkp3e] fast-path: using direct REST upsert (snapshot token)
2025-10-02 02:27:45.518  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:45.496 [send-1759352265240-7x54rgwkp3e] stage: network attempt started (path=rest)
2025-10-02 02:27:45.518  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:45.496 [send-1759352265240-7x54rgwkp3e] POST /messages (fast-path)
2025-10-02 02:27:45.518  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:45.496 [send-1759352265240-7x54rgwkp3e] stage: pre-network
2025-10-02 02:27:45.518  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:45.497 [send-1759352265240-7x54rgwkp3e] fast-path: direct REST upsert -> https://sxykfyqrqwifkirveqgr.supabase.co/rest/v1/messages?on_conflict=dedupe_key&select=*,reactions(*),users!messages_user_id_fkey(display_name,avatar_url)
2025-10-02 02:27:45.519  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:45.497 [send-1759352265240-7x54rgwkp3e] POST /messages (fast-path)
2025-10-02 02:27:45.519  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:45.497 [send-1759352265240-7x54rgwkp3e] stage: network attempt started (path=rest)
2025-10-02 02:27:45.720  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:45.715 [send-1759352265240-7x54rgwkp3e] fast-path: direct REST upsert successful
2025-10-02 02:27:45.721  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:45.715 [send-1759352265240-7x54rgwkp3e] stage: response received
2025-10-02 02:27:45.721  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:45.715 ‚úÖ Direct send successful - message 1759352265240-7x54rgwkp3e
2025-10-02 02:27:45.721  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:45.715 [TERMINAL] DIRECT_SUCCESS id=1759352265240-7x54rgwkp3e ts=2025-10-01T20:57:45.715Z
2025-10-02 02:27:45.721  7026-7026  Capacitor/Console       com.confessr.app                     D  File: https://localhost/assets/index-Cj_V1rE1.js - Line 355 - Msg: [send-1759352265240-7x54rgwkp3e] attempt-1: 219.180908203125 ms
2025-10-02 02:27:45.721  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:45.715 ‚úÖ Message 1759352265240-7x54rgwkp3e sent successfully
2025-10-02 02:27:45.721  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:45.716 [supabase-pipeline] push-fanout call: origin=https://localhost headers=[Content-Type,apikey,Authorization]
2025-10-02 02:27:45.739  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 386 - Msg: [realtime-v2] üì® Realtime INSERT received: id=f383d399-9e79-4de9-a450-995ff1c3e399, content="Tu ubcub8...", user=839d1d4a-e72b-47bb-b74e-ef28a15f43ee, dedupe=d:839d1d4a-e72b-47bb-b74e-ef28a15f43ee:78045bbf-7474-46df-aac1-f34936b67d24:1759352265240-7x54rgwkp3e
2025-10-02 02:27:45.818  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 386 - Msg: [realtime-v2] üì® Built message from row: id=f383d399-9e79-4de9-a450-995ff1c3e399, delivery_status=delivered
2025-10-02 02:27:45.818  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 386 - Msg: üì® attachMessageToState: action=replaced-by-dedupe, id=f383d399-9e79-4de9-a450-995ff1c3e399, before=21, after=21
2025-10-02 02:27:45.818  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 362 - Msg: üì¶ MessageCache: CACHED 10 messages for group 78045bbf-7474-46df-aac1-f34936b67d24
2025-10-02 02:27:45.818  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 386 - Msg: üì¶ MessageCache updated for group 78045bbf-7474-46df-aac1-f34936b67d24 after realtime insert (21 messages)
2025-10-02 02:27:45.819  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 386 - Msg: [realtime-v2] üì® Message attached to state: id=f383d399-9e79-4de9-a450-995ff1c3e399
2025-10-02 02:27:45.876  7026-7026  Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 46355868, pluginId: CapacitorSQLite, methodName: run
2025-10-02 02:27:45.877  7026-7026  Capacitor               com.confessr.app                     V  callback: 46355868, pluginId: CapacitorSQLite, methodName: run, methodData: {"database":"confessr_db","statement":"INSERT OR REPLACE INTO messages\n       (id, group_id, user_id, content, is_ghost, message_type, category, parent_id, image_url, created_at, updated_at, deleted_at)\n       VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?);","values":["f383d399-9e79-4de9-a450-995ff1c3e399","78045bbf-7474-46df-aac1-f34936b67d24","839d1d4a-e72b-47bb-b74e-ef28a15f43ee","Tu ubcub8",1,"text",null,null,null,1759352265673,null,null],"transaction":true,"readonly":false,"returnMode":"no","isSQL92":true}
2025-10-02 02:27:45.896  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 386 - Msg: [realtime-v2] üì® Message persisted to SQLite: id=f383d399-9e79-4de9-a450-995ff1c3e399
2025-10-02 02:27:45.897  7026-7026  Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 46355869, pluginId: CapacitorSQLite, methodName: run
2025-10-02 02:27:45.897  7026-7026  Capacitor               com.confessr.app                     V  callback: 46355869, pluginId: CapacitorSQLite, methodName: run, methodData: {"database":"confessr_db","statement":"UPDATE groups SET last_sync_timestamp = ? WHERE id = ?","values":[1759352265895,"78045bbf-7474-46df-aac1-f34936b67d24"],"transaction":true,"readonly":false,"returnMode":"no","isSQL92":true}
2025-10-02 02:27:46.867  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:46.866 [supabase-pipeline] push-fanout response: status=200
2025-10-02 02:27:46.868  7026-7026  Capacitor/Console       com.confessr.app                     D  File: https://localhost/assets/index-Cj_V1rE1.js - Line 355 - Msg: [send-1759352265240-7x54rgwkp3e] total: 1427.551025390625 ms
2025-10-02 02:27:46.868  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:57:46.866 [send-1759352265240-7x54rgwkp3e] finished
2025-10-02 02:28:19.253  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 728 - Msg: üì§ Send button clicked, processing message... [object Object]
2025-10-02 02:28:19.255  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 728 - Msg: üì§ About to send message: [object Object]
2025-10-02 02:28:19.256  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 386 - Msg: üì§ sendMessage called: [object Object]
2025-10-02 02:28:19.256  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 728 - Msg: ‚úÖ Message dispatched, clearing input
2025-10-02 02:28:19.257  7026-7026  Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 46355870, pluginId: Network, methodName: getStatus
2025-10-02 02:28:19.257  7026-7026  Capacitor               com.confessr.app                     V  callback: 46355870, pluginId: Network, methodName: getStatus, methodData: {}
2025-10-02 02:28:19.272  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 386 - Msg: üåê Network status: [object Object]
2025-10-02 02:28:19.386  7026-7026  Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 46355871, pluginId: CapacitorSQLite, methodName: run
2025-10-02 02:28:19.386  7026-7026  Capacitor               com.confessr.app                     V  callback: 46355871, pluginId: CapacitorSQLite, methodName: run, methodData: {"database":"confessr_db","statement":"INSERT OR REPLACE INTO messages\n       (id, group_id, user_id, content, is_ghost, message_type, category, parent_id, image_url, created_at, updated_at, deleted_at)\n       VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?);","values":["1759352299266-p92f13w2vms","78045bbf-7474-46df-aac1-f34936b67d24","839d1d4a-e72b-47bb-b74e-ef28a15f43ee","Dyjtsjsghyy hdgsygbhdg dyhgxh gdg hdg chfh",1,"text",null,null,null,1759352299267,null,null],"transaction":true,"readonly":false,"returnMode":"no","isSQL92":true}
2025-10-02 02:28:19.518  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:19.515 üì§ Sending message 1759352299266-p92f13w2vms...
2025-10-02 02:28:19.518  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:19.515 [send-1759352299266-p92f13w2vms] stage: entered send
2025-10-02 02:28:19.518  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:19.515 [send-1759352299266-p92f13w2vms] input: group=78045bbf user=839d1d4a ghost=true type=text dedupe=true
2025-10-02 02:28:19.518  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:19.515 [send-1759352299266-p92f13w2vms] checkHealth() -> start
2025-10-02 02:28:19.534  7026-7026  Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 46355872, pluginId: Network, methodName: getStatus
2025-10-02 02:28:19.534  7026-7026  Capacitor               com.confessr.app                     V  callback: 46355872, pluginId: Network, methodName: getStatus, methodData: {}
2025-10-02 02:28:19.564  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:19.549 üåê Network state: online=true webViewReady=true type=cellular
2025-10-02 02:28:19.564  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:19.550 üè• Health check: starting (online=true webViewReady=true)
2025-10-02 02:28:19.564  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:19.550 üè• Health check: using cached access token (healthy)
2025-10-02 02:28:19.565  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:19.550 [send-1759352299266-p92f13w2vms] checkHealth() -> healthy
2025-10-02 02:28:19.565  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:19.550 [send-1759352299266-p92f13w2vms] stage: health ok
2025-10-02 02:28:19.565  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:19.550 üì§ Direct send attempt 1/3 - message 1759352299266-p92f13w2vms
2025-10-02 02:28:19.565  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:19.550 [send-1759352299266-p92f13w2vms] stage: pre-network
2025-10-02 02:28:19.565  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:19.551 [send-1759352299266-p92f13w2vms] pre-network: acquiring full client (‚â§5000ms)
2025-10-02 02:28:19.565  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:19.551 üîë getClient() called - hasClient=true isInitialized=true initPromiseActive=false
2025-10-02 02:28:24.554  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:24.551 [send-1759352299266-p92f13w2vms] Direct send timeout after 5000ms ‚Üí enqueued to outbox
2025-10-02 02:28:24.554  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:24.551 [send-1759352299266-p92f13w2vms] fallbackToOutbox(): waited sqliteReady in 0ms
2025-10-02 02:28:24.582  7026-7026  Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 46355873, pluginId: CapacitorSQLite, methodName: run
2025-10-02 02:28:24.582  7026-7026  Capacitor               com.confessr.app                     V  callback: 46355873, pluginId: CapacitorSQLite, methodName: run, methodData: {"database":"confessr_db","statement":"\n      INSERT INTO outbox (group_id, user_id, content, retry_count, next_retry_at)\n      VALUES (?, ?, ?, ?, ?)\n    ","values":["78045bbf-7474-46df-aac1-f34936b67d24","839d1d4a-e72b-47bb-b74e-ef28a15f43ee","{\"id\":\"1759352299266-p92f13w2vms\",\"content\":\"Dyjtsjsghyy hdgsygbhdg dyhgxh gdg hdg chfh\",\"is_ghost\":true,\"message_type\":\"text\",\"category\":null,\"parent_id\":null,\"image_url\":null,\"dedupe_key\":\"d:839d1d4a-e72b-47bb-b74e-ef28a15f43ee:78045bbf-7474-46df-aac1-f34936b67d24:1759352299266-p92f13w2vms\",\"requires_pseudonym\":true}",0,1759352304551],"transaction":true,"readonly":false,"returnMode":"no","isSQL92":true}
2025-10-02 02:28:24.723  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:24.652 üì¶ Message 1759352299266-p92f13w2vms stored in outbox (dedupe_key=d:839d1d4a-e72b-47bb-b74e-ef28a15f43ee:78045bbf-7474-46df-aac1-f34936b67d24:1759352299266-p92f13w2vms)
2025-10-02 02:28:24.723  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:24.652 üì¶ Triggering outbox processing from: pipeline-fallback
2025-10-02 02:28:24.723  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:24.652 ‚ùå Direct send attempt 1 failed - message 1759352299266-p92f13w2vms: MessageQueuedError: Message 1759352299266-p92f13w2vms queued to outbox (pre-network timeout)
                                                                                                    MessageQueuedError: Message 1759352299266-p92f13w2vms queued to outbox (pre-network timeout)
                                                                                                        at Nl.sendMessageInternal (https://localhost/assets/index-Cj_V1rE1.js:355:4983)
                                                                                                        at async Nl.sendMessage (https://localhost/assets/index-Cj_V1rE1.js:355:2609)
                                                                                                        at async sendMessage (https://localhost/assets/index-Cj_V1rE1.js:386:32893)
2025-10-02 02:28:24.723  7026-7026  Capacitor/Console       com.confessr.app                     D  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [send-1759352299266-p92f13w2vms] attempt-1: 5101.682861328125 ms
2025-10-02 02:28:24.723  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:24.657 [send-1759352299266-p92f13w2vms] immediate fallback due to error="Message 1759352299266-p92f13w2vms queued to outbox (pre-network timeout)" at 2025-10-01T20:58:24.657Z
2025-10-02 02:28:24.724  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:24.657 [send-1759352299266-p92f13w2vms] fallbackToOutbox(): waited sqliteReady in 0ms
2025-10-02 02:28:24.724  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:24.658 üì¶ Starting outbox processing - session outbox-1759352304658
2025-10-02 02:28:24.724  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:24.658 üì¶ Outbox pre-check: sqliteReady after 0ms
2025-10-02 02:28:24.745  7026-7026  Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 46355874, pluginId: CapacitorSQLite, methodName: run
2025-10-02 02:28:24.745  7026-7026  Capacitor               com.confessr.app                     V  callback: 46355874, pluginId: CapacitorSQLite, methodName: run, methodData: {"database":"confessr_db","statement":"\n      INSERT INTO outbox (group_id, user_id, content, retry_count, next_retry_at)\n      VALUES (?, ?, ?, ?, ?)\n    ","values":["78045bbf-7474-46df-aac1-f34936b67d24","839d1d4a-e72b-47bb-b74e-ef28a15f43ee","{\"id\":\"1759352299266-p92f13w2vms\",\"content\":\"Dyjtsjsghyy hdgsygbhdg dyhgxh gdg hdg chfh\",\"is_ghost\":true,\"message_type\":\"text\",\"category\":null,\"parent_id\":null,\"image_url\":null,\"dedupe_key\":\"d:839d1d4a-e72b-47bb-b74e-ef28a15f43ee:78045bbf-7474-46df-aac1-f34936b67d24:1759352299266-p92f13w2vms\",\"requires_pseudonym\":true}",0,1759352304657],"transaction":true,"readonly":false,"returnMode":"no","isSQL92":true}
2025-10-02 02:28:24.746  7026-7026  Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 46355875, pluginId: CapacitorSQLite, methodName: query
2025-10-02 02:28:24.746  7026-7026  Capacitor               com.confessr.app                     V  callback: 46355875, pluginId: CapacitorSQLite, methodName: query, methodData: {"database":"confessr_db","statement":"\n      SELECT * FROM outbox \n      WHERE next_retry_at <= ? \n      ORDER BY next_retry_at ASC\n    ","values":[1759352304658],"readonly":false,"isSQL92":true}
2025-10-02 02:28:24.826  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:24.813 üì¶ Message 1759352299266-p92f13w2vms stored in outbox (dedupe_key=d:839d1d4a-e72b-47bb-b74e-ef28a15f43ee:78045bbf-7474-46df-aac1-f34936b67d24:1759352299266-p92f13w2vms)
2025-10-02 02:28:24.826  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:24.813 üì¶ Trigger coalesced (debounced 300ms) from: pipeline-fallback
2025-10-02 02:28:24.827  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:24.813 üì¶ Message 1759352299266-p92f13w2vms queued to outbox
2025-10-02 02:28:24.827  7026-7026  Capacitor/Console       com.confessr.app                     D  File: https://localhost/assets/index-Cj_V1rE1.js - Line 355 - Msg: [send-1759352299266-p92f13w2vms] total: 5298.593994140625 ms
2025-10-02 02:28:24.827  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:24.813 [send-1759352299266-p92f13w2vms] finished
2025-10-02 02:28:24.827  7026-7026  Capacitor/Console       com.confessr.app                     E  File: https://localhost/assets/index-Cj_V1rE1.js - Line 386 - Msg: üì§ Pipeline send outcome for message: 1759352299266-p92f13w2vms MessageQueuedError: Message 1759352299266-p92f13w2vms queued to outbox (direct send error)
2025-10-02 02:28:24.827  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 386 - Msg: üì¶ Message queued to outbox; keeping delivery_status as sending
2025-10-02 02:28:24.827  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:24.814 üì¶ non-empty: start (6)
2025-10-02 02:28:24.847  7026-7026  Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 46355876, pluginId: Network, methodName: getStatus
2025-10-02 02:28:24.848  7026-7026  Capacitor               com.confessr.app                     V  callback: 46355876, pluginId: Network, methodName: getStatus, methodData: {}
2025-10-02 02:28:24.912  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:24.891 üåê Network state: online=true webViewReady=true type=cellular
2025-10-02 02:28:26.343  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:26.322 ‚ùå Outbox message 25 failed: Error: REST upsert failed: 403 {"code":"42501","details":null,"hint":null,"message":"new row violates row-level security policy (USING expression) for table \"messages\""}
                                                                                                    Error: REST upsert failed: 403 {"code":"42501","details":null,"hint":null,"message":"new row violates row-level security policy (USING expression) for table \"messages\""}
                                                                                                        at Nl.fastPathDirectUpsert (https://localhost/assets/index-Cj_V1rE1.js:359:3396)
                                                                                                        at async Nl.processOutbox (https://localhost/assets/index-Cj_V1rE1.js:359:8751)
2025-10-02 02:28:26.343  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:26.322 üóëÔ∏è Outbox message 25 exceeded max retries, removing
2025-10-02 02:28:26.361  7026-7026  Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 46355877, pluginId: CapacitorSQLite, methodName: run
2025-10-02 02:28:26.361  7026-7026  Capacitor               com.confessr.app                     V  callback: 46355877, pluginId: CapacitorSQLite, methodName: run, methodData: {"database":"confessr_db","statement":"DELETE FROM outbox WHERE id = ?","values":[25],"transaction":true,"readonly":false,"returnMode":"no","isSQL92":true}
2025-10-02 02:28:26.500  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:26.475 üì¶ Processing outbox message 2/6 (ID: 27)
2025-10-02 02:28:26.500  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:26.475 [#27] attempt start (dk=d:839d1d4a-e72b-47bb-b74e-ef28a15f43ee:78045bbf-7474-46df-aac1-f34936b67d24:1759352137407-vbao54ka72f)
2025-10-02 02:28:26.500  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:26.475 [#27] requires_pseudonym=true  attempting upsert before send
2025-10-02 02:28:26.501  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:26.475 [#27] POST /messages (outbox fast-path)
2025-10-02 02:28:26.501  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:26.475 [outbox-27] stage: pre-network
2025-10-02 02:28:26.501  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:26.475 [outbox-27] fast-path: direct REST upsert -> https://sxykfyqrqwifkirveqgr.supabase.co/rest/v1/messages?on_conflict=dedupe_key&select=*,reactions(*),users!messages_user_id_fkey(display_name,avatar_url)
2025-10-02 02:28:26.501  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:26.475 [outbox-27] POST /messages (fast-path)
2025-10-02 02:28:26.501  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:26.475 [outbox-27] stage: network attempt started (path=rest)
2025-10-02 02:28:26.753  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:26.720 ‚ùå Outbox message 27 failed: Error: REST upsert failed: 403 {"code":"42501","details":null,"hint":null,"message":"new row violates row-level security policy (USING expression) for table \"messages\""}
                                                                                                    Error: REST upsert failed: 403 {"code":"42501","details":null,"hint":null,"message":"new row violates row-level security policy (USING expression) for table \"messages\""}
                                                                                                        at Nl.fastPathDirectUpsert (https://localhost/assets/index-Cj_V1rE1.js:359:3396)
                                                                                                        at async Nl.processOutbox (https://localhost/assets/index-Cj_V1rE1.js:359:8751)
2025-10-02 02:28:26.938  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 386 - Msg: [network] 20:58:26 ‚ÑπÔ∏è Network status: online {"isOnline":true,"connectionType":"cellular"}
2025-10-02 02:28:26.938  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 386 - Msg: [network] 20:58:26 ‚ÑπÔ∏è Network reconnected
2025-10-02 02:28:26.938  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [realtime-v2] Network came online
2025-10-02 02:28:26.938  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [realtime-v2] Network online - triggering outbox processing only
2025-10-02 02:28:26.939  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 382 - Msg: [outbox-unified] Trigger requested from: network-online (priority: high)
2025-10-02 02:28:26.939  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 382 - Msg: [outbox-unified] Scheduling processing in 50ms for: network-online
2025-10-02 02:28:27.009  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:26.982 üåê Network reconnection detected - refreshing session
2025-10-02 02:28:27.009  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:26.982 üîÑ Recovering session using cached tokens...
2025-10-02 02:28:27.009  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:26.982 üîë getClient() called - hasClient=true isInitialized=true initPromiseActive=false
2025-10-02 02:28:27.009  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:26.982 üîÑ Using cached tokens to recover session
2025-10-02 02:28:27.009  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:26.983 üì¶ Outbox processing already in progress; skipping
2025-10-02 02:28:27.089  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:27.076 ‚ùå Outbox message 29 failed: Error: REST upsert failed: 403 {"code":"42501","details":null,"hint":null,"message":"new row violates row-level security policy (USING expression) for table \"messages\""}
                                                                                                    Error: REST upsert failed: 403 {"code":"42501","details":null,"hint":null,"message":"new row violates row-level security policy (USING expression) for table \"messages\""}
                                                                                                        at Nl.fastPathDirectUpsert (https://localhost/assets/index-Cj_V1rE1.js:359:3396)
                                                                                                        at async Nl.processOutbox (https://localhost/assets/index-Cj_V1rE1.js:359:8751)
2025-10-02 02:28:27.113  7026-7026  Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 46355879, pluginId: CapacitorSQLite, methodName: run
2025-10-02 02:28:27.113  7026-7026  Capacitor               com.confessr.app                     V  callback: 46355879, pluginId: CapacitorSQLite, methodName: run, methodData: {"database":"confessr_db","statement":"\n      UPDATE outbox \n      SET retry_count = ?, next_retry_at = ? \n      WHERE id = ?\n    ","values":[3,1759352309217,29],"transaction":true,"readonly":false,"returnMode":"no","isSQL92":true}
2025-10-02 02:28:27.264  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:27.240 ‚è∞ Outbox message 29 scheduled for retry 3/5 in 2141ms
2025-10-02 02:28:27.264  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:27.240 [TERMINAL] OUTBOX_BACKOFF_SCHEDULED<3> id=1759352177188-kuemkivpjgm ts=2025-10-01T20:58:27.240Z
2025-10-02 02:28:27.264  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:27.240 üì¶ Processing outbox message 4/6 (ID: 31)
2025-10-02 02:28:27.264  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:27.240 [#31] attempt start (dk=d:839d1d4a-e72b-47bb-b74e-ef28a15f43ee:78045bbf-7474-46df-aac1-f34936b67d24:1759352242832-jd9zeegkhge)
2025-10-02 02:28:27.264  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:27.241 [#31] requires_pseudonym=true  attempting upsert before send
2025-10-02 02:28:27.265  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:27.241 [#31] POST /messages (outbox fast-path)
2025-10-02 02:28:27.265  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:27.241 [outbox-31] stage: pre-network
2025-10-02 02:28:27.265  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:27.241 [outbox-31] fast-path: direct REST upsert -> https://sxykfyqrqwifkirveqgr.supabase.co/rest/v1/messages?on_conflict=dedupe_key&select=*,reactions(*),users!messages_user_id_fkey(display_name,avatar_url)
2025-10-02 02:28:27.265  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:27.241 [outbox-31] POST /messages (fast-path)
2025-10-02 02:28:27.265  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:27.241 [outbox-31] stage: network attempt started (path=rest)
2025-10-02 02:28:27.428  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/reconnectionManager-CQjvXHB9.js - Line 2 - Msg: [reconnection-mgr] 20:58:27 Reconnect already in progress, waiting - reason: network-online
2025-10-02 02:28:27.463  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:27.446 ‚ùå Outbox message 31 failed: Error: REST upsert failed: 403 {"code":"42501","details":null,"hint":null,"message":"new row violates row-level security policy (USING expression) for table \"messages\""}
                                                                                                    Error: REST upsert failed: 403 {"code":"42501","details":null,"hint":null,"message":"new row violates row-level security policy (USING expression) for table \"messages\""}
                                                                                                        at Nl.fastPathDirectUpsert (https://localhost/assets/index-Cj_V1rE1.js:359:3396)
                                                                                                        at async Nl.processOutbox (https://localhost/assets/index-Cj_V1rE1.js:359:8751)
2025-10-02 02:28:27.482  7026-7026  Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 46355880, pluginId: CapacitorSQLite, methodName: run
2025-10-02 02:28:27.482  7026-7026  Capacitor               com.confessr.app                     V  callback: 46355880, pluginId: CapacitorSQLite, methodName: run, methodData: {"database":"confessr_db","statement":"\n      UPDATE outbox \n      SET retry_count = ?, next_retry_at = ? \n      WHERE id = ?\n    ","values":[2,1759352309896,31],"transaction":true,"readonly":false,"returnMode":"no","isSQL92":true}
2025-10-02 02:28:27.527  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 386 - Msg: [realtime-v2] Channel already subscribed (fast path)
2025-10-02 02:28:27.528  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 362 - Msg: üîÑ Fetching messages for group: 78045bbf-7474-46df-aac1-f34936b67d24
2025-10-02 02:28:27.821  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 362 - Msg: üì¶ MessageCache: HIT for group 78045bbf-7474-46df-aac1-f34936b67d24 (10 messages)
2025-10-02 02:28:27.821  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 362 - Msg: ‚ö° INSTANT: Loading messages from in-memory cache
2025-10-02 02:28:27.821  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 362 - Msg: üîÑ mergeWithPending: incoming=10, existing=22, optimistic=1, realtime=0, final=11
2025-10-02 02:28:27.821  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 362 - Msg: ‚ö° INSTANT: Displayed 10 cached messages instantly
2025-10-02 02:28:27.821  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 362 - Msg: üì± Background refresh from SQLite
2025-10-02 02:28:27.972  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:27.940 ‚è∞ Outbox message 31 scheduled for retry 2/5 in 2449ms
2025-10-02 02:28:27.972  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:27.940 [TERMINAL] OUTBOX_BACKOFF_SCHEDULED<2> id=1759352242832-jd9zeegkhge ts=2025-10-01T20:58:27.940Z
2025-10-02 02:28:27.972  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:27.940 üì¶ Processing outbox message 5/6 (ID: 32)
2025-10-02 02:28:27.972  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:27.940 [#32] attempt start (dk=d:839d1d4a-e72b-47bb-b74e-ef28a15f43ee:78045bbf-7474-46df-aac1-f34936b67d24:1759352299266-p92f13w2vms)
2025-10-02 02:28:27.973  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:27.940 [#32] requires_pseudonym=true  attempting upsert before send
2025-10-02 02:28:27.973  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:27.940 [#32] POST /messages (outbox fast-path)
2025-10-02 02:28:27.973  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:27.940 [outbox-32] stage: pre-network
2025-10-02 02:28:27.973  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:27.940 [outbox-32] fast-path: direct REST upsert -> https://sxykfyqrqwifkirveqgr.supabase.co/rest/v1/messages?on_conflict=dedupe_key&select=*,reactions(*),users!messages_user_id_fkey(display_name,avatar_url)
2025-10-02 02:28:27.973  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:27.940 [outbox-32] POST /messages (fast-path)
2025-10-02 02:28:27.973  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:27.941 [outbox-32] stage: network attempt started (path=rest)
2025-10-02 02:28:27.973  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 362 - Msg: üîÑ Background: Refreshing messages from SQLite to ensure cache is current
2025-10-02 02:28:27.974  7026-7026  Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 46355881, pluginId: CapacitorSQLite, methodName: query
2025-10-02 02:28:27.974  7026-7026  Capacitor               com.confessr.app                     V  callback: 46355881, pluginId: CapacitorSQLite, methodName: query, methodData: {"database":"confessr_db","statement":"\n      SELECT * FROM messages\n      WHERE group_id = ?\n      ORDER BY created_at DESC\n      LIMIT ?\n    ","values":["78045bbf-7474-46df-aac1-f34936b67d24",10],"readonly":false,"isSQL92":true}
2025-10-02 02:28:28.160  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:28.078 üîë getClient() called - hasClient=true isInitialized=true initPromiseActive=false
2025-10-02 02:28:28.216  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:28.214 [outbox-32] fast-path: direct REST upsert successful
2025-10-02 02:28:28.269  7026-7026  Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 46355882, pluginId: CapacitorSQLite, methodName: run
2025-10-02 02:28:28.269  7026-7026  Capacitor               com.confessr.app                     V  callback: 46355882, pluginId: CapacitorSQLite, methodName: run, methodData: {"database":"confessr_db","statement":"DELETE FROM outbox WHERE id = ?","values":[32],"transaction":true,"readonly":false,"returnMode":"no","isSQL92":true}
2025-10-02 02:28:28.294  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 386 - Msg: [realtime-v2] üì® Realtime INSERT received: id=4d4cce51-1c0b-486c-838d-e425370dbf12, content="Dyjtsjsghyy hdgsygbh...", user=839d1d4a-e72b-47bb-b74e-ef28a15f43ee, dedupe=d:839d1d4a-e72b-47bb-b74e-ef28a15f43ee:78045bbf-7474-46df-aac1-f34936b67d24:1759352299266-p92f13w2vms
2025-10-02 02:28:28.380  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 386 - Msg: [realtime-v2] üì® Built message from row: id=4d4cce51-1c0b-486c-838d-e425370dbf12, delivery_status=delivered
2025-10-02 02:28:28.380  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 386 - Msg: üì® attachMessageToState: action=replaced-by-dedupe, id=4d4cce51-1c0b-486c-838d-e425370dbf12, before=11, after=11
2025-10-02 02:28:28.380  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 362 - Msg: üì¶ MessageCache: CACHED 10 messages for group 78045bbf-7474-46df-aac1-f34936b67d24
2025-10-02 02:28:28.380  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 386 - Msg: üì¶ MessageCache updated for group 78045bbf-7474-46df-aac1-f34936b67d24 after realtime insert (11 messages)
2025-10-02 02:28:28.380  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 386 - Msg: [realtime-v2] üì® Message attached to state: id=4d4cce51-1c0b-486c-838d-e425370dbf12
2025-10-02 02:28:28.545  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:28.517 ‚úÖ Outbox item delivered‚Üídeleted id=32 (dedupe_key=d:839d1d4a-e72b-47bb-b74e-ef28a15f43ee:78045bbf-7474-46df-aac1-f34936b67d24:1759352299266-p92f13w2vms)
2025-10-02 02:28:28.545  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:28.518 [TERMINAL] OUTBOX_DELIVERED id=1759352299266-p92f13w2vms ts=2025-10-01T20:58:28.518Z
2025-10-02 02:28:28.545  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:28.518 üîë getClient() called - hasClient=true isInitialized=true initPromiseActive=false
2025-10-02 02:28:28.545  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:28.518 [supabase-pipeline] push-fanout call: origin=https://localhost headers=[Content-Type,apikey,Authorization]
2025-10-02 02:28:28.546  7026-7026  Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 46355883, pluginId: CapacitorSQLite, methodName: run
2025-10-02 02:28:28.546  7026-7026  Capacitor               com.confessr.app                     V  callback: 46355883, pluginId: CapacitorSQLite, methodName: run, methodData: {"database":"confessr_db","statement":"INSERT OR REPLACE INTO messages\n       (id, group_id, user_id, content, is_ghost, message_type, category, parent_id, image_url, created_at, updated_at, deleted_at)\n       VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?);","values":["4d4cce51-1c0b-486c-838d-e425370dbf12","78045bbf-7474-46df-aac1-f34936b67d24","839d1d4a-e72b-47bb-b74e-ef28a15f43ee","Dyjtsjsghyy hdgsygbhdg dyhgxh gdg hdg chfh",1,"text",null,null,null,1759352308123,null,null],"transaction":true,"readonly":false,"returnMode":"no","isSQL92":true}
2025-10-02 02:28:28.600  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 386 - Msg: [realtime-v2] üì® Message persisted to SQLite: id=4d4cce51-1c0b-486c-838d-e425370dbf12
2025-10-02 02:28:28.601  7026-7026  Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 46355884, pluginId: CapacitorSQLite, methodName: run
2025-10-02 02:28:28.601  7026-7026  Capacitor               com.confessr.app                     V  callback: 46355884, pluginId: CapacitorSQLite, methodName: run, methodData: {"database":"confessr_db","statement":"UPDATE groups SET last_sync_timestamp = ? WHERE id = ?","values":[1759352308598,"78045bbf-7474-46df-aac1-f34936b67d24"],"transaction":true,"readonly":false,"returnMode":"no","isSQL92":true}
2025-10-02 02:28:29.330  7026-7026  Capacitor/AppPlugin     com.confessr.app                     V  Notifying listeners for event pause
2025-10-02 02:28:29.330  7026-7026  Capacitor/AppPlugin     com.confessr.app                     D  No listeners found for event pause
2025-10-02 02:28:29.331  7026-7026  Capacitor               com.confessr.app                     D  App paused
2025-10-02 02:28:29.744  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:29.714 [supabase-pipeline] push-fanout response: status=200
2025-10-02 02:28:29.744  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:29.714 üì¶ Processing outbox message 6/6 (ID: 33)
2025-10-02 02:28:29.744  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:29.714 [#33] attempt start (dk=d:839d1d4a-e72b-47bb-b74e-ef28a15f43ee:78045bbf-7474-46df-aac1-f34936b67d24:1759352299266-p92f13w2vms)
2025-10-02 02:28:29.744  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:29.714 [#33] requires_pseudonym=true  attempting upsert before send
2025-10-02 02:28:29.744  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:29.717 [#33] POST /messages (outbox fast-path)
2025-10-02 02:28:29.744  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:29.717 [outbox-33] stage: pre-network
2025-10-02 02:28:29.744  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:29.718 [outbox-33] fast-path: direct REST upsert -> https://sxykfyqrqwifkirveqgr.supabase.co/rest/v1/messages?on_conflict=dedupe_key&select=*,reactions(*),users!messages_user_id_fkey(display_name,avatar_url)
2025-10-02 02:28:29.744  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:29.718 [outbox-33] POST /messages (fast-path)
2025-10-02 02:28:29.744  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:29.718 [outbox-33] stage: network attempt started (path=rest)
2025-10-02 02:28:29.943  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:29.940 ‚ùå Outbox message 33 failed: Error: REST upsert failed: 403 {"code":"42501","details":null,"hint":null,"message":"new row violates row-level security policy (USING expression) for table \"messages\""}
                                                                                                    Error: REST upsert failed: 403 {"code":"42501","details":null,"hint":null,"message":"new row violates row-level security policy (USING expression) for table \"messages\""}
                                                                                                        at Nl.fastPathDirectUpsert (https://localhost/assets/index-Cj_V1rE1.js:359:3396)
                                                                                                        at async Nl.processOutbox (https://localhost/assets/index-Cj_V1rE1.js:359:8751)
2025-10-02 02:28:29.944  7026-7026  Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 46355885, pluginId: CapacitorSQLite, methodName: run
2025-10-02 02:28:29.944  7026-7026  Capacitor               com.confessr.app                     V  callback: 46355885, pluginId: CapacitorSQLite, methodName: run, methodData: {"database":"confessr_db","statement":"\n      UPDATE outbox \n      SET retry_count = ?, next_retry_at = ? \n      WHERE id = ?\n    ","values":[1,1759352311540,33],"transaction":true,"readonly":false,"returnMode":"no","isSQL92":true}
2025-10-02 02:28:30.008  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:30.007 ‚è∞ Outbox message 33 scheduled for retry 1/5 in 1599ms
2025-10-02 02:28:30.008  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:30.008 [TERMINAL] OUTBOX_BACKOFF_SCHEDULED<1> id=1759352299266-p92f13w2vms ts=2025-10-01T20:58:30.008Z
2025-10-02 02:28:30.009  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:30.008 üì¶ Outbox processing complete - session outbox-1759352304658
2025-10-02 02:28:31.084  7026-7026  Capacitor/Console       com.confessr.app                     W  File: https://localhost/assets/index-Cj_V1rE1.js - Line 362 - Msg: ‚ö†Ô∏è Could not get current user for poll data, continuing without user context: Error: Auth timeout
2025-10-02 02:28:31.084  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 362 - Msg: üì¶ MessageCache: CACHED 10 messages for group 78045bbf-7474-46df-aac1-f34936b67d24
2025-10-02 02:28:31.084  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 362 - Msg: üîÑ mergeWithPending: incoming=9, existing=11, optimistic=0, realtime=1, final=10
2025-10-02 02:28:31.094  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 362 - Msg: üîÑ Background: Updated UI with 9 fresh messages from SQLite
2025-10-02 02:28:31.166  7026-7026  Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 46355886, pluginId: Network, methodName: getStatus
2025-10-02 02:28:31.166  7026-7026  Capacitor               com.confessr.app                     V  callback: 46355886, pluginId: Network, methodName: getStatus, methodData: {}
2025-10-02 02:28:31.302  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 362 - Msg: üåê Fetching messages from Supabase...
2025-10-02 02:28:31.302  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 362 - Msg: üîÑ Loading remaining messages in background...
2025-10-02 02:28:31.309  7026-7026  Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 46355887, pluginId: CapacitorSQLite, methodName: query
2025-10-02 02:28:31.309  7026-7026  Capacitor               com.confessr.app                     V  callback: 46355887, pluginId: CapacitorSQLite, methodName: query, methodData: {"database":"confessr_db","statement":"\n      SELECT * FROM messages\n      WHERE group_id = ?\n      ORDER BY created_at DESC\n      LIMIT ?\n    ","values":["78045bbf-7474-46df-aac1-f34936b67d24",30],"readonly":false,"isSQL92":true}
2025-10-02 02:28:31.491  7026-7026  Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 46355888, pluginId: CapacitorSQLite, methodName: query
2025-10-02 02:28:31.491  7026-7026  Capacitor               com.confessr.app                     V  callback: 46355888, pluginId: CapacitorSQLite, methodName: query, methodData: {"database":"confessr_db","statement":"SELECT * FROM users WHERE id = ?","values":["7bef8c3e-cd57-47be-bcd7-0d9edecad2a5"],"readonly":false,"isSQL92":true}
2025-10-02 02:28:31.506  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:31.500 üîë getClient() called - hasClient=true isInitialized=true initPromiseActive=false
2025-10-02 02:28:32.856  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:31.989 üîÑ Token recovery timed out
2025-10-02 02:28:32.856  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:31.989 üì¶ Triggering outbox processing from: network-reconnect
2025-10-02 02:28:32.857  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:31.989 ‚úÖ Network reconnect session refresh completed
2025-10-02 02:28:32.857  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:31.990 üì¶ Starting outbox processing - session outbox-1759352311990
2025-10-02 02:28:32.858  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:31.990 üì¶ Outbox pre-check: sqliteReady after 0ms
2025-10-02 02:28:32.932  7026-7026  Capacitor/AppPlugin     com.confessr.app                     D  Firing change: false
2025-10-02 02:28:32.933  7026-7026  Capacitor/AppPlugin     com.confessr.app                     V  Notifying listeners for event appStateChange
2025-10-02 02:28:32.964  7026-7026  Capacitor               com.confessr.app                     D  App stopped
2025-10-02 02:28:32.970  7026-7026  Capacitor               com.confessr.app                     D  Saving instance state!
2025-10-02 02:28:33.290  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 387 - Msg: [device-lock] 20:58:32 üì± Device locked/app backgrounded
2025-10-02 02:28:33.292  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 728 - Msg: üì± App state changed: inactive
2025-10-02 02:28:33.293  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 728 - Msg: üì± App going to background/pause
2025-10-02 02:28:33.293  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [lifecycle] App paused - resetting outbox processing state
2025-10-02 02:28:33.294  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 382 - Msg: [outbox-unified] Resetting outbox processing state
2025-10-02 02:28:33.307  7026-7026  Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 46355889, pluginId: CapacitorSQLite, methodName: query
2025-10-02 02:28:33.308  7026-7026  Capacitor               com.confessr.app                     V  callback: 46355889, pluginId: CapacitorSQLite, methodName: query, methodData: {"database":"confessr_db","statement":"\n      SELECT * FROM outbox \n      WHERE next_retry_at <= ? \n      ORDER BY next_retry_at ASC\n    ","values":[1759352311990],"readonly":false,"isSQL92":true}
2025-10-02 02:28:33.477  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:33.471 üì¶ non-empty: start (4)
2025-10-02 02:28:33.483  7026-7026  Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 46355890, pluginId: Network, methodName: getStatus
2025-10-02 02:28:33.483  7026-7026  Capacitor               com.confessr.app                     V  callback: 46355890, pluginId: Network, methodName: getStatus, methodData: {}
2025-10-02 02:28:33.499  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:33.497 üåê Network state: online=true webViewReady=true type=cellular
2025-10-02 02:28:33.502  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:33.497 üè• Health check: starting (online=true webViewReady=true)
2025-10-02 02:28:33.502  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:33.497 üè• Health check: using cached access token (healthy)
2025-10-02 02:28:33.502  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:33.497 üîë getClient() called - hasClient=true isInitialized=true initPromiseActive=false
2025-10-02 02:28:33.502  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:33.497 üì¶ Processing outbox message 1/4 (ID: 27)
2025-10-02 02:28:33.503  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:33.498 [#27] attempt start (dk=d:839d1d4a-e72b-47bb-b74e-ef28a15f43ee:78045bbf-7474-46df-aac1-f34936b67d24:1759352137407-vbao54ka72f)
2025-10-02 02:28:33.504  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:33.498 [#27] requires_pseudonym=true  attempting upsert before send
2025-10-02 02:28:33.504  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:33.498 [#27] POST /messages (outbox fast-path)
2025-10-02 02:28:33.504  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:33.498 [outbox-27] stage: pre-network
2025-10-02 02:28:33.505  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:33.498 [outbox-27] fast-path: direct REST upsert -> https://sxykfyqrqwifkirveqgr.supabase.co/rest/v1/messages?on_conflict=dedupe_key&select=*,reactions(*),users!messages_user_id_fkey(display_name,avatar_url)
2025-10-02 02:28:33.505  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:33.498 [outbox-27] POST /messages (fast-path)
2025-10-02 02:28:33.505  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:33.498 [outbox-27] stage: network attempt started (path=rest)
2025-10-02 02:28:33.713  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:33.712 ‚ùå Outbox message 27 failed: Error: REST upsert failed: 403 {"code":"42501","details":null,"hint":null,"message":"new row violates row-level security policy (USING expression) for table \"messages\""}
                                                                                                    Error: REST upsert failed: 403 {"code":"42501","details":null,"hint":null,"message":"new row violates row-level security policy (USING expression) for table \"messages\""}
                                                                                                        at Nl.fastPathDirectUpsert (https://localhost/assets/index-Cj_V1rE1.js:359:3396)
                                                                                                        at async Nl.processOutbox (https://localhost/assets/index-Cj_V1rE1.js:359:8751)
2025-10-02 02:28:33.714  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:33.712 üóëÔ∏è Outbox message 27 exceeded max retries, removing
2025-10-02 02:28:33.716  7026-7026  Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 46355891, pluginId: CapacitorSQLite, methodName: run
2025-10-02 02:28:33.716  7026-7026  Capacitor               com.confessr.app                     V  callback: 46355891, pluginId: CapacitorSQLite, methodName: run, methodData: {"database":"confessr_db","statement":"DELETE FROM outbox WHERE id = ?","values":[27],"transaction":true,"readonly":false,"returnMode":"no","isSQL92":true}
2025-10-02 02:28:33.793  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:33.792 üì¶ Processing outbox message 2/4 (ID: 29)
2025-10-02 02:28:33.794  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:33.792 [#29] attempt start (dk=d:839d1d4a-e72b-47bb-b74e-ef28a15f43ee:78045bbf-7474-46df-aac1-f34936b67d24:1759352177188-kuemkivpjgm)
2025-10-02 02:28:33.794  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:33.792 [#29] requires_pseudonym=true  attempting upsert before send
2025-10-02 02:28:33.795  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:33.793 [#29] POST /messages (outbox fast-path)
2025-10-02 02:28:33.796  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:33.793 [outbox-29] stage: pre-network
2025-10-02 02:28:33.796  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:33.793 [outbox-29] fast-path: direct REST upsert -> https://sxykfyqrqwifkirveqgr.supabase.co/rest/v1/messages?on_conflict=dedupe_key&select=*,reactions(*),users!messages_user_id_fkey(display_name,avatar_url)
2025-10-02 02:28:33.796  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:33.793 [outbox-29] POST /messages (fast-path)
2025-10-02 02:28:33.797  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:33.793 [outbox-29] stage: network attempt started (path=rest)
2025-10-02 02:28:34.046  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:34.044 ‚ùå Outbox message 29 failed: Error: REST upsert failed: 403 {"code":"42501","details":null,"hint":null,"message":"new row violates row-level security policy (USING expression) for table \"messages\""}
                                                                                                    Error: REST upsert failed: 403 {"code":"42501","details":null,"hint":null,"message":"new row violates row-level security policy (USING expression) for table \"messages\""}
                                                                                                        at Nl.fastPathDirectUpsert (https://localhost/assets/index-Cj_V1rE1.js:359:3396)
                                                                                                        at async Nl.processOutbox (https://localhost/assets/index-Cj_V1rE1.js:359:8751)
2025-10-02 02:28:34.048  7026-7026  Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 46355892, pluginId: CapacitorSQLite, methodName: run
2025-10-02 02:28:34.049  7026-7026  Capacitor               com.confessr.app                     V  callback: 46355892, pluginId: CapacitorSQLite, methodName: run, methodData: {"database":"confessr_db","statement":"\n      UPDATE outbox \n      SET retry_count = ?, next_retry_at = ? \n      WHERE id = ?\n    ","values":[4,1759352315665,29],"transaction":true,"readonly":false,"returnMode":"no","isSQL92":true}
2025-10-02 02:28:34.064  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:34.062 ‚è∞ Outbox message 29 scheduled for retry 4/5 in 1620ms
2025-10-02 02:28:34.064  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:34.062 [TERMINAL] OUTBOX_BACKOFF_SCHEDULED<4> id=1759352177188-kuemkivpjgm ts=2025-10-01T20:58:34.062Z
2025-10-02 02:28:34.065  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:34.062 üì¶ Processing outbox message 3/4 (ID: 31)
2025-10-02 02:28:34.065  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:34.062 [#31] attempt start (dk=d:839d1d4a-e72b-47bb-b74e-ef28a15f43ee:78045bbf-7474-46df-aac1-f34936b67d24:1759352242832-jd9zeegkhge)
2025-10-02 02:28:34.066  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:34.062 [#31] requires_pseudonym=true  attempting upsert before send
2025-10-02 02:28:34.066  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:34.063 [#31] POST /messages (outbox fast-path)
2025-10-02 02:28:34.066  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:34.063 [outbox-31] stage: pre-network
2025-10-02 02:28:34.068  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:34.063 [outbox-31] fast-path: direct REST upsert -> https://sxykfyqrqwifkirveqgr.supabase.co/rest/v1/messages?on_conflict=dedupe_key&select=*,reactions(*),users!messages_user_id_fkey(display_name,avatar_url)
2025-10-02 02:28:34.068  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:34.063 [outbox-31] POST /messages (fast-path)
2025-10-02 02:28:34.069  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:34.063 [outbox-31] stage: network attempt started (path=rest)
2025-10-02 02:28:34.246  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:34.245 ‚ùå Outbox message 31 failed: Error: REST upsert failed: 403 {"code":"42501","details":null,"hint":null,"message":"new row violates row-level security policy (USING expression) for table \"messages\""}
                                                                                                    Error: REST upsert failed: 403 {"code":"42501","details":null,"hint":null,"message":"new row violates row-level security policy (USING expression) for table \"messages\""}
                                                                                                        at Nl.fastPathDirectUpsert (https://localhost/assets/index-Cj_V1rE1.js:359:3396)
                                                                                                        at async Nl.processOutbox (https://localhost/assets/index-Cj_V1rE1.js:359:8751)
2025-10-02 02:28:34.248  7026-7026  Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 46355893, pluginId: CapacitorSQLite, methodName: run
2025-10-02 02:28:34.248  7026-7026  Capacitor               com.confessr.app                     V  callback: 46355893, pluginId: CapacitorSQLite, methodName: run, methodData: {"database":"confessr_db","statement":"\n      UPDATE outbox \n      SET retry_count = ?, next_retry_at = ? \n      WHERE id = ?\n    ","values":[3,1759352316842,31],"transaction":true,"readonly":false,"returnMode":"no","isSQL92":true}
2025-10-02 02:28:34.260  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:34.259 ‚è∞ Outbox message 31 scheduled for retry 3/5 in 2597ms
2025-10-02 02:28:34.260  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:34.259 [TERMINAL] OUTBOX_BACKOFF_SCHEDULED<3> id=1759352242832-jd9zeegkhge ts=2025-10-01T20:58:34.259Z
2025-10-02 02:28:34.260  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:34.259 üì¶ Processing outbox message 4/4 (ID: 33)
2025-10-02 02:28:34.261  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:34.259 [#33] attempt start (dk=d:839d1d4a-e72b-47bb-b74e-ef28a15f43ee:78045bbf-7474-46df-aac1-f34936b67d24:1759352299266-p92f13w2vms)
2025-10-02 02:28:34.261  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:34.259 [#33] requires_pseudonym=true  attempting upsert before send
2025-10-02 02:28:34.261  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:34.260 [#33] POST /messages (outbox fast-path)
2025-10-02 02:28:34.262  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:34.260 [outbox-33] stage: pre-network
2025-10-02 02:28:34.262  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:34.260 [outbox-33] fast-path: direct REST upsert -> https://sxykfyqrqwifkirveqgr.supabase.co/rest/v1/messages?on_conflict=dedupe_key&select=*,reactions(*),users!messages_user_id_fkey(display_name,avatar_url)
2025-10-02 02:28:34.263  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:34.260 [outbox-33] POST /messages (fast-path)
2025-10-02 02:28:34.263  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:34.260 [outbox-33] stage: network attempt started (path=rest)
2025-10-02 02:28:34.453  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:34.451 ‚ùå Outbox message 33 failed: Error: REST upsert failed: 403 {"code":"42501","details":null,"hint":null,"message":"new row violates row-level security policy (USING expression) for table \"messages\""}
                                                                                                    Error: REST upsert failed: 403 {"code":"42501","details":null,"hint":null,"message":"new row violates row-level security policy (USING expression) for table \"messages\""}
                                                                                                        at Nl.fastPathDirectUpsert (https://localhost/assets/index-Cj_V1rE1.js:359:3396)
                                                                                                        at async Nl.processOutbox (https://localhost/assets/index-Cj_V1rE1.js:359:8751)
2025-10-02 02:28:34.455  7026-7026  Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 46355894, pluginId: CapacitorSQLite, methodName: run
2025-10-02 02:28:34.456  7026-7026  Capacitor               com.confessr.app                     V  callback: 46355894, pluginId: CapacitorSQLite, methodName: run, methodData: {"database":"confessr_db","statement":"\n      UPDATE outbox \n      SET retry_count = ?, next_retry_at = ? \n      WHERE id = ?\n    ","values":[2,1759352316340,33],"transaction":true,"readonly":false,"returnMode":"no","isSQL92":true}
2025-10-02 02:28:34.474  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:34.473 ‚è∞ Outbox message 33 scheduled for retry 2/5 in 1889ms
2025-10-02 02:28:34.475  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:34.473 [TERMINAL] OUTBOX_BACKOFF_SCHEDULED<2> id=1759352299266-p92f13w2vms ts=2025-10-01T20:58:34.473Z
2025-10-02 02:28:34.475  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:34.473 üì¶ Outbox processing complete - session outbox-1759352311990
2025-10-02 02:28:40.364  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 386 - Msg: [realtime-v2] Subscription status: CHANNEL_ERROR
2025-10-02 02:28:40.365  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 386 - Msg: [realtime-v2] ‚ùå Connection failed with status: CHANNEL_ERROR
2025-10-02 02:28:40.365  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 386 - Msg: [realtime-v2] üîß CHANNEL_ERROR detected - attempting session refresh
2025-10-02 02:28:40.366  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:40.357 üîê Waiting for in-flight session request
2025-10-02 02:28:47.647  7026-7026  Capacitor               com.confessr.app                     D  App restarted
2025-10-02 02:28:47.650  7026-7026  Capacitor               com.confessr.app                     D  App started
2025-10-02 02:28:47.652  7026-7026  Capacitor/AppPlugin     com.confessr.app                     D  Firing change: true
2025-10-02 02:28:47.652  7026-7026  Capacitor/AppPlugin     com.confessr.app                     V  Notifying listeners for event appStateChange
2025-10-02 02:28:47.653  7026-7026  Capacitor/AppPlugin     com.confessr.app                     V  Notifying listeners for event resume
2025-10-02 02:28:47.655  7026-7026  Capacitor               com.confessr.app                     D  App resumed
2025-10-02 02:28:47.679  7026-21128 Capacitor/NetworkPlugin com.confessr.app                     V  Notifying listeners for event networkStatusChange
2025-10-02 02:28:47.713  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 387 - Msg: [device-lock] 20:58:47 üîì Device unlocked after 15s (short lock)
2025-10-02 02:28:47.713  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 387 - Msg: [whatsapp-connection] 20:58:47 üîì Device unlocked: short lock (15s)
2025-10-02 02:28:47.713  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 386 - Msg: [device-lifecycle] 20:58:47 ‚ÑπÔ∏è App resume from appStateChange {"timeSinceLastResume":1759352327664,"source":"appStateChange"}
2025-10-02 02:28:47.713  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:47.666 üì± App resume detected - checking session state
2025-10-02 02:28:47.713  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:47.666 üîÑ Recovering session using cached tokens...
2025-10-02 02:28:47.714  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:47.666 üîë getClient() called - hasClient=true isInitialized=true initPromiseActive=false
2025-10-02 02:28:47.715  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:47.667 üîÑ Using cached tokens to recover session
2025-10-02 02:28:47.716  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 728 - Msg: üì± App state changed: active
2025-10-02 02:28:47.716  7026-7026  Capacitor/Console       com.confessr.app                     I  File:  - Line 334 - Msg: undefined
2025-10-02 02:28:47.716  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 387 - Msg: [device-lock] 20:58:47 App foreground event while not locked, treating as activity
2025-10-02 02:28:47.716  7026-7026  Capacitor/Console       com.confessr.app                     I  File:  - Line 334 - Msg: undefined
2025-10-02 02:28:47.716  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 386 - Msg: [device-lifecycle] 20:58:47 ‚ÑπÔ∏è App resume from resume {"timeSinceLastResume":4,"source":"resume"}
2025-10-02 02:28:47.717  7026-7026  Capacitor/Console       com.confessr.app                     D  File: https://localhost/assets/index-Cj_V1rE1.js - Line 386 - Msg: [device-lifecycle] 20:58:47 üîç Resume debounced (too soon after last resume)
2025-10-02 02:28:47.717  7026-7026  Capacitor/Console       com.confessr.app                     I  File:  - Line 334 - Msg: undefined
2025-10-02 02:28:47.718  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 382 - Msg: [outbox-unified] Trigger requested from: app-resume (priority: high)
2025-10-02 02:28:47.718  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 382 - Msg: [outbox-unified] Scheduling processing in 50ms for: app-resume
2025-10-02 02:28:47.718  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/reconnectionManager-CQjvXHB9.js - Line 2 - Msg: [reconnection-mgr] 20:58:47 Reconnect already in progress, waiting - reason: device-unlock-short
2025-10-02 02:28:47.727  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:47.721 üì¶ Starting outbox processing - session outbox-1759352327721
2025-10-02 02:28:47.728  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:47.722 üì¶ Outbox pre-check: sqliteReady after 0ms
2025-10-02 02:28:47.733  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 386 - Msg: [network] 20:58:47 ‚ÑπÔ∏è Network status: online {"isOnline":true,"connectionType":"cellular"}
2025-10-02 02:28:47.733  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 386 - Msg: [network] 20:58:47 ‚ÑπÔ∏è Network reconnected
2025-10-02 02:28:47.733  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [realtime-v2] Network came online
2025-10-02 02:28:47.733  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [realtime-v2] Network online - triggering outbox processing only
2025-10-02 02:28:47.733  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 382 - Msg: [outbox-unified] Trigger requested from: network-online (priority: high)
2025-10-02 02:28:47.733  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 382 - Msg: [outbox-unified] Scheduling processing in 50ms for: network-online
2025-10-02 02:28:47.734  7026-7026  Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 46355895, pluginId: CapacitorSQLite, methodName: query
2025-10-02 02:28:47.734  7026-7026  Capacitor               com.confessr.app                     V  callback: 46355895, pluginId: CapacitorSQLite, methodName: query, methodData: {"database":"confessr_db","statement":"\n      SELECT * FROM outbox \n      WHERE next_retry_at <= ? \n      ORDER BY next_retry_at ASC\n    ","values":[1759352327722],"readonly":false,"isSQL92":true}
2025-10-02 02:28:47.796  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:47.793 üåê Network reconnection detected - refreshing session
2025-10-02 02:28:47.799  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:47.793 üîÑ Recovering session using cached tokens...
2025-10-02 02:28:47.799  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:47.793 üîë getClient() called - hasClient=true isInitialized=true initPromiseActive=false
2025-10-02 02:28:47.799  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:47.793 üîÑ Using cached tokens to recover session
2025-10-02 02:28:47.822  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:47.802 üì¶ non-empty: start (3)
2025-10-02 02:28:47.823  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:47.804 üì¶ Outbox processing already in progress; skipping
2025-10-02 02:28:47.824  7026-7026  Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 46355896, pluginId: Network, methodName: getStatus
2025-10-02 02:28:47.824  7026-7026  Capacitor               com.confessr.app                     V  callback: 46355896, pluginId: Network, methodName: getStatus, methodData: {}
2025-10-02 02:28:48.023  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:47.835 üåê Network state: online=true webViewReady=true type=cellular
2025-10-02 02:28:48.023  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:47.836 üè• Health check: starting (online=true webViewReady=true)
2025-10-02 02:28:48.023  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:47.836 üè• Health check: using cached access token (healthy)
2025-10-02 02:28:48.023  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:47.836 üîë getClient() called - hasClient=true isInitialized=true initPromiseActive=false
2025-10-02 02:28:48.023  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:47.836 üì¶ Processing outbox message 1/3 (ID: 29)
2025-10-02 02:28:48.023  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:47.836 [#29] attempt start (dk=d:839d1d4a-e72b-47bb-b74e-ef28a15f43ee:78045bbf-7474-46df-aac1-f34936b67d24:1759352177188-kuemkivpjgm)
2025-10-02 02:28:48.024  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:47.836 [#29] requires_pseudonym=true  attempting upsert before send
2025-10-02 02:28:48.024  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:47.837 [#29] POST /messages (outbox fast-path)
2025-10-02 02:28:48.024  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:47.837 [outbox-29] stage: pre-network
2025-10-02 02:28:48.024  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:47.837 [outbox-29] fast-path: direct REST upsert -> https://sxykfyqrqwifkirveqgr.supabase.co/rest/v1/messages?on_conflict=dedupe_key&select=*,reactions(*),users!messages_user_id_fkey(display_name,avatar_url)
2025-10-02 02:28:48.024  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:47.837 [outbox-29] POST /messages (fast-path)
2025-10-02 02:28:48.024  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:47.837 [outbox-29] stage: network attempt started (path=rest)
2025-10-02 02:28:48.089  7026-7026  Capacitor/...oardPlugin com.confessr.app                     V  Notifying listeners for event keyboardWillShow
2025-10-02 02:28:48.089  7026-7026  Capacitor/...oardPlugin com.confessr.app                     D  No listeners found for event keyboardWillShow
2025-10-02 02:28:48.090  7026-7026  Capacitor/...oardPlugin com.confessr.app                     V  Notifying listeners for event keyboardDidShow
2025-10-02 02:28:48.090  7026-7026  Capacitor/...oardPlugin com.confessr.app                     D  No listeners found for event keyboardDidShow
2025-10-02 02:28:48.226  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/reconnectionManager-CQjvXHB9.js - Line 2 - Msg: [reconnection-mgr] 20:58:48 Reconnect already in progress, waiting - reason: network-online
2025-10-02 02:28:48.330  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 386 - Msg: [realtime-v2] Channel already subscribed (fast path)
2025-10-02 02:28:48.331  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 362 - Msg: üîÑ Fetching messages for group: 78045bbf-7474-46df-aac1-f34936b67d24
2025-10-02 02:28:48.370  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 362 - Msg: üì¶ MessageCache: HIT for group 78045bbf-7474-46df-aac1-f34936b67d24 (10 messages)
2025-10-02 02:28:48.371  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 362 - Msg: ‚ö° INSTANT: Loading messages from in-memory cache
2025-10-02 02:28:48.372  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 362 - Msg: üîÑ mergeWithPending: incoming=9, existing=10, optimistic=0, realtime=1, final=10
2025-10-02 02:28:48.372  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 362 - Msg: ‚ö° INSTANT: Displayed 9 cached messages instantly
2025-10-02 02:28:48.373  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 362 - Msg: üì± Background refresh from SQLite
2025-10-02 02:28:48.403  7026-7026  Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 46355897, pluginId: CapacitorSQLite, methodName: query
2025-10-02 02:28:48.403  7026-7026  Capacitor               com.confessr.app                     V  callback: 46355897, pluginId: CapacitorSQLite, methodName: query, methodData: {"database":"confessr_db","statement":"\n      SELECT * FROM messages\n      WHERE group_id = ?\n      ORDER BY created_at DESC\n      LIMIT ?\n    ","values":["78045bbf-7474-46df-aac1-f34936b67d24",10],"readonly":false,"isSQL92":true}
2025-10-02 02:28:48.424  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 362 - Msg: üîÑ Background: Refreshing messages from SQLite to ensure cache is current
2025-10-02 02:28:48.425  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:48.423 üîë getClient() called - hasClient=true isInitialized=true initPromiseActive=false
2025-10-02 02:28:51.265  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:51.260 ‚ùå Outbox message 29 failed: Error: REST upsert failed: 403 {"code":"42501","details":null,"hint":null,"message":"new row violates row-level security policy (USING expression) for table \"messages\""}
                                                                                                    Error: REST upsert failed: 403 {"code":"42501","details":null,"hint":null,"message":"new row violates row-level security policy (USING expression) for table \"messages\""}
                                                                                                        at Nl.fastPathDirectUpsert (https://localhost/assets/index-Cj_V1rE1.js:359:3396)
                                                                                                        at async Nl.processOutbox (https://localhost/assets/index-Cj_V1rE1.js:359:8751)
                                                                                                        at async https://localhost/assets/index-Cj_V1rE1.js:382:1381
2025-10-02 02:28:51.266  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:51.261 üóëÔ∏è Outbox message 29 exceeded max retries, removing
2025-10-02 02:28:51.267  7026-7026  Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 46355898, pluginId: CapacitorSQLite, methodName: run
2025-10-02 02:28:51.268  7026-7026  Capacitor               com.confessr.app                     V  callback: 46355898, pluginId: CapacitorSQLite, methodName: run, methodData: {"database":"confessr_db","statement":"DELETE FROM outbox WHERE id = ?","values":[29],"transaction":true,"readonly":false,"returnMode":"no","isSQL92":true}
2025-10-02 02:28:51.353  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:51.351 üì¶ Processing outbox message 2/3 (ID: 33)
2025-10-02 02:28:51.353  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:51.351 [#33] attempt start (dk=d:839d1d4a-e72b-47bb-b74e-ef28a15f43ee:78045bbf-7474-46df-aac1-f34936b67d24:1759352299266-p92f13w2vms)
2025-10-02 02:28:51.353  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:51.351 [#33] requires_pseudonym=true  attempting upsert before send
2025-10-02 02:28:51.353  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:51.351 [#33] POST /messages (outbox fast-path)
2025-10-02 02:28:51.353  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:51.351 [outbox-33] stage: pre-network
2025-10-02 02:28:51.353  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:51.351 [outbox-33] fast-path: direct REST upsert -> https://sxykfyqrqwifkirveqgr.supabase.co/rest/v1/messages?on_conflict=dedupe_key&select=*,reactions(*),users!messages_user_id_fkey(display_name,avatar_url)
2025-10-02 02:28:51.353  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:51.351 [outbox-33] POST /messages (fast-path)
2025-10-02 02:28:51.354  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:51.351 [outbox-33] stage: network attempt started (path=rest)
2025-10-02 02:28:51.424  7026-7026  Capacitor/Console       com.confessr.app                     W  File: https://localhost/assets/index-Cj_V1rE1.js - Line 362 - Msg: ‚ö†Ô∏è Could not get current user for poll data, continuing without user context: Error: Auth timeout
2025-10-02 02:28:51.424  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 362 - Msg: üì¶ MessageCache: CACHED 10 messages for group 78045bbf-7474-46df-aac1-f34936b67d24
2025-10-02 02:28:51.425  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 362 - Msg: üîÑ mergeWithPending: incoming=10, existing=10, optimistic=0, realtime=0, final=10
2025-10-02 02:28:51.425  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 362 - Msg: üîÑ Background: Updated UI with 10 fresh messages from SQLite
2025-10-02 02:28:51.461  7026-7026  Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 46355899, pluginId: Network, methodName: getStatus
2025-10-02 02:28:51.461  7026-7026  Capacitor               com.confessr.app                     V  callback: 46355899, pluginId: Network, methodName: getStatus, methodData: {}
2025-10-02 02:28:51.475  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 362 - Msg: üåê Fetching messages from Supabase...
2025-10-02 02:28:51.475  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:51.474 ‚ùå Outbox message 33 failed: Error: REST upsert failed: 403 {"code":"42501","details":null,"hint":null,"message":"new row violates row-level security policy (USING expression) for table \"messages\""}
                                                                                                    Error: REST upsert failed: 403 {"code":"42501","details":null,"hint":null,"message":"new row violates row-level security policy (USING expression) for table \"messages\""}
                                                                                                        at Nl.fastPathDirectUpsert (https://localhost/assets/index-Cj_V1rE1.js:359:3396)
                                                                                                        at async Nl.processOutbox (https://localhost/assets/index-Cj_V1rE1.js:359:8751)
                                                                                                        at async https://localhost/assets/index-Cj_V1rE1.js:382:1381
2025-10-02 02:28:51.477  7026-7026  Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 46355900, pluginId: CapacitorSQLite, methodName: run
2025-10-02 02:28:51.477  7026-7026  Capacitor               com.confessr.app                     V  callback: 46355900, pluginId: CapacitorSQLite, methodName: run, methodData: {"database":"confessr_db","statement":"\n      UPDATE outbox \n      SET retry_count = ?, next_retry_at = ? \n      WHERE id = ?\n    ","values":[3,1759352333917,33],"transaction":true,"readonly":false,"returnMode":"no","isSQL92":true}
2025-10-02 02:28:51.495  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:51.492 ‚è∞ Outbox message 33 scheduled for retry 3/5 in 2442ms
2025-10-02 02:28:51.495  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:51.492 [TERMINAL] OUTBOX_BACKOFF_SCHEDULED<3> id=1759352299266-p92f13w2vms ts=2025-10-01T20:58:51.492Z
2025-10-02 02:28:51.495  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:51.492 üì¶ Processing outbox message 3/3 (ID: 31)
2025-10-02 02:28:51.496  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:51.492 [#31] attempt start (dk=d:839d1d4a-e72b-47bb-b74e-ef28a15f43ee:78045bbf-7474-46df-aac1-f34936b67d24:1759352242832-jd9zeegkhge)
2025-10-02 02:28:51.496  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:51.492 [#31] requires_pseudonym=true  attempting upsert before send
2025-10-02 02:28:51.496  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:51.493 [#31] POST /messages (outbox fast-path)
2025-10-02 02:28:51.496  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:51.493 [outbox-31] stage: pre-network
2025-10-02 02:28:51.496  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:51.493 [outbox-31] fast-path: direct REST upsert -> https://sxykfyqrqwifkirveqgr.supabase.co/rest/v1/messages?on_conflict=dedupe_key&select=*,reactions(*),users!messages_user_id_fkey(display_name,avatar_url)
2025-10-02 02:28:51.497  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:51.493 [outbox-31] POST /messages (fast-path)
2025-10-02 02:28:51.497  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:51.493 [outbox-31] stage: network attempt started (path=rest)
2025-10-02 02:28:51.525  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 362 - Msg: üîÑ Loading remaining messages in background...
2025-10-02 02:28:51.528  7026-7026  Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 46355901, pluginId: CapacitorSQLite, methodName: query
2025-10-02 02:28:51.528  7026-7026  Capacitor               com.confessr.app                     V  callback: 46355901, pluginId: CapacitorSQLite, methodName: query, methodData: {"database":"confessr_db","statement":"\n      SELECT * FROM messages\n      WHERE group_id = ?\n      ORDER BY created_at DESC\n      LIMIT ?\n    ","values":["78045bbf-7474-46df-aac1-f34936b67d24",30],"readonly":false,"isSQL92":true}
2025-10-02 02:28:51.544  7026-7026  Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 46355902, pluginId: CapacitorSQLite, methodName: query
2025-10-02 02:28:51.544  7026-7026  Capacitor               com.confessr.app                     V  callback: 46355902, pluginId: CapacitorSQLite, methodName: query, methodData: {"database":"confessr_db","statement":"SELECT * FROM users WHERE id = ?","values":["7bef8c3e-cd57-47be-bcd7-0d9edecad2a5"],"readonly":false,"isSQL92":true}
2025-10-02 02:28:51.548  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:51.548 üîë getClient() called - hasClient=true isInitialized=true initPromiseActive=false
2025-10-02 02:28:51.617  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:51.616 ‚ùå Outbox message 31 failed: Error: REST upsert failed: 403 {"code":"42501","details":null,"hint":null,"message":"new row violates row-level security policy (USING expression) for table \"messages\""}
                                                                                                    Error: REST upsert failed: 403 {"code":"42501","details":null,"hint":null,"message":"new row violates row-level security policy (USING expression) for table \"messages\""}
                                                                                                        at Nl.fastPathDirectUpsert (https://localhost/assets/index-Cj_V1rE1.js:359:3396)
                                                                                                        at async Nl.processOutbox (https://localhost/assets/index-Cj_V1rE1.js:359:8751)
                                                                                                        at async https://localhost/assets/index-Cj_V1rE1.js:382:1381
2025-10-02 02:28:51.619  7026-7026  Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 46355903, pluginId: CapacitorSQLite, methodName: run
2025-10-02 02:28:51.619  7026-7026  Capacitor               com.confessr.app                     V  callback: 46355903, pluginId: CapacitorSQLite, methodName: run, methodData: {"database":"confessr_db","statement":"\n      UPDATE outbox \n      SET retry_count = ?, next_retry_at = ? \n      WHERE id = ?\n    ","values":[4,1759352333344,31],"transaction":true,"readonly":false,"returnMode":"no","isSQL92":true}
2025-10-02 02:28:51.640  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:51.639 ‚è∞ Outbox message 31 scheduled for retry 4/5 in 1728ms
2025-10-02 02:28:51.643  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:51.641 [TERMINAL] OUTBOX_BACKOFF_SCHEDULED<4> id=1759352242832-jd9zeegkhge ts=2025-10-01T20:58:51.639Z
2025-10-02 02:28:51.643  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:51.642 üì¶ Outbox processing complete - session outbox-1759352327721
2025-10-02 02:28:52.669  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:52.667 üîÑ Token recovery timed out
2025-10-02 02:28:52.670  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:52.668 ‚ö†Ô∏è App resume: token recovery failed, session may need refresh
2025-10-02 02:28:52.670  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:52.668 üîë getClient() called - hasClient=true isInitialized=true initPromiseActive=false
2025-10-02 02:28:52.671  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:52.668 ‚úÖ App resume: token applied to realtime
2025-10-02 02:28:52.671  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:52.668 üì¶ Triggering outbox processing from: app-resume
2025-10-02 02:28:52.672  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:52.669 ‚úÖ App resume completed using token recovery strategy
2025-10-02 02:28:52.672  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 386 - Msg: [general] 20:58:52 ‚ÑπÔ∏è Triggered outbox processing on app resume
2025-10-02 02:28:52.673  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 386 - Msg: [device-lifecycle] 20:58:52 ‚ÑπÔ∏è App resume processed from appStateChange
2025-10-02 02:28:52.673  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:52.669 üì¶ Starting outbox processing - session outbox-1759352332669
2025-10-02 02:28:52.673  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:52.670 üì¶ Outbox pre-check: sqliteReady after 0ms
2025-10-02 02:28:52.677  7026-7026  Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 46355904, pluginId: CapacitorSQLite, methodName: query
2025-10-02 02:28:52.677  7026-7026  Capacitor               com.confessr.app                     V  callback: 46355904, pluginId: CapacitorSQLite, methodName: query, methodData: {"database":"confessr_db","statement":"\n      SELECT * FROM outbox \n      WHERE next_retry_at <= ? \n      ORDER BY next_retry_at ASC\n    ","values":[1759352332670],"readonly":false,"isSQL92":true}
2025-10-02 02:28:52.682  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:52.681 üì¶ No outbox messages to process; idle
2025-10-02 02:28:52.798  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:52.797 üîÑ Token recovery timed out
2025-10-02 02:28:52.799  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:52.797 üì¶ Trigger coalesced (debounced 300ms) from: network-reconnect
2025-10-02 02:28:52.800  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:58:52.797 ‚úÖ Network reconnect session refresh completed
2025-10-02 02:29:09.332  7026-21128 Capacitor/NetworkPlugin com.confessr.app                     V  Notifying listeners for event networkStatusChange
2025-10-02 02:29:09.350  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 386 - Msg: [network] 20:59:09 ‚ÑπÔ∏è Network status: offline {"isOnline":false,"connectionType":"none"}
2025-10-02 02:29:09.350  7026-7026  Capacitor/Console       com.confessr.app                     W  File: https://localhost/assets/index-Cj_V1rE1.js - Line 386 - Msg: [network] 20:59:09 ‚ö†Ô∏è Network disconnected
2025-10-02 02:29:09.350  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 387 - Msg: [whatsapp-connection] 20:59:09 üìä Status: disconnected -  
2025-10-02 02:29:09.350  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 386 - Msg: [connection] 20:59:09 ‚ÑπÔ∏è Connection status: disconnected -  {"isUserVisible":false}
2025-10-02 02:29:09.350  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 386 - Msg: [realtime-v2] Cleaning up realtime subscription (navigation) - keeping root socket alive
2025-10-02 02:29:09.433  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 386 - Msg: [realtime-v2] Subscription status: CLOSED
2025-10-02 02:29:09.433  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 386 - Msg: [realtime-v2] ‚ùå Connection failed with status: CLOSED
2025-10-02 02:29:09.433  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [supabase-pipeline] 20:59:09.430 üîê Waiting for in-flight session request
2025-10-02 02:29:09.535  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 387 - Msg: [whatsapp-connection] 20:59:09 üìä Status: disconnected -  
2025-10-02 02:29:09.535  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 386 - Msg: [connection] 20:59:09 ‚ÑπÔ∏è Connection status: disconnected -  {"isUserVisible":false}
2025-10-02 02:29:10.408  7026-7026  Capacitor/AppPlugin     com.confessr.app                     V  Notifying listeners for event pause
2025-10-02 02:29:10.408  7026-7026  Capacitor/AppPlugin     com.confessr.app                     D  No listeners found for event pause
2025-10-02 02:29:10.413  7026-7026  Capacitor               com.confessr.app                     D  App paused
2025-10-02 02:29:10.624  7026-7026  Capacitor/AppPlugin     com.confessr.app                     D  Firing change: false
2025-10-02 02:29:10.624  7026-7026  Capacitor/AppPlugin     com.confessr.app                     V  Notifying listeners for event appStateChange
2025-10-02 02:29:10.635  7026-7026  Capacitor               com.confessr.app                     D  App stopped
2025-10-02 02:29:10.638  7026-7026  Capacitor               com.confessr.app                     D  Saving instance state!
2025-10-02 02:29:10.640  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 387 - Msg: [device-lock] 20:59:10 üì± Device locked/app backgrounded
2025-10-02 02:29:10.641  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 728 - Msg: üì± App state changed: inactive
2025-10-02 02:29:10.641  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 728 - Msg: üì± App going to background/pause
2025-10-02 02:29:10.642  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 359 - Msg: [lifecycle] App paused - resetting outbox processing state
2025-10-02 02:29:10.642  7026-7026  Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-Cj_V1rE1.js - Line 382 - Msg: [outbox-unified] Resetting outbox processing state
2025-10-02 02:29:10.928  7026-7026  Capacitor/...oardPlugin com.confessr.app                     V  Notifying listeners for event keyboardWillHide
2025-10-02 02:29:10.928  7026-7026  Capacitor/...oardPlugin com.confessr.app                     D  No listeners found for event keyboardWillHide
2025-10-02 02:29:10.934  7026-7026  Capacitor/...oardPlugin com.confessr.app                     V  Notifying listeners for event keyboardDidHide
2025-10-02 02:29:10.934  7026-7026  Capacitor/...oardPlugin com.confessr.app                     D  No listeners found for event keyboardDidHide
