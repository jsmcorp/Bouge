
2025-10-04 05:17:35.496 25543-25543 Capacitor               com.confessr.app                     D  Saving instance state!
2025-10-04 05:17:35.506 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 399 - Msg: [device-lock] 23:47:35 📱 Device locked/app backgrounded
2025-10-04 05:17:35.507 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 745 - Msg: 📱 App state changed: inactive
2025-10-04 05:17:35.507 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 745 - Msg: 📱 App going to background/pause
2025-10-04 05:17:35.507 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 361 - Msg: [lifecycle] App paused - resetting outbox processing state
2025-10-04 05:17:35.507 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 390 - Msg: [outbox-unified] Resetting outbox processing state
2025-10-04 05:17:56.447 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 394 - Msg: [realtime-v2] 💓 Heartbeat sent
2025-10-04 05:18:26.562 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 394 - Msg: [realtime-v2] 💓 Heartbeat sent
2025-10-04 05:18:43.695 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 394 - Msg: [realtime-v2] ⚠️ Realtime appears DEAD (no events for 76s)
2025-10-04 05:18:43.695 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 394 - Msg: [realtime-v2] 🔄 Forcing reconnection due to realtime death
2025-10-04 05:18:43.696 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 394 - Msg: [realtime-v2] 💓 Heartbeat stopped
2025-10-04 05:18:43.696 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 394 - Msg: [realtime-v2] 💓 Heartbeat check stopped
2025-10-04 05:18:43.696 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 394 - Msg: [realtime-v2] 🔧 CRITICAL: Forcing realtime recovery
2025-10-04 05:18:43.696 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 394 - Msg: [realtime-v2] 🔧 Realtime died at: 2025-10-03T23:48:43.689Z
2025-10-04 05:18:43.696 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 394 - Msg: [realtime-v2] Subscription status: CLOSED
2025-10-04 05:18:43.697 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 394 - Msg: [realtime-v2] ❌ Connection failed with status: CLOSED
2025-10-04 05:18:43.697 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 361 - Msg: [supabase-pipeline] 23:48:43.692 🔐 Waiting for in-flight session request (max 5s)
2025-10-04 05:18:43.919 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 394 - Msg: [realtime-v2] 🔧 Removed dead channel
2025-10-04 05:18:43.920 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 394 - Msg: [realtime-v2] 🔧 Forcing session refresh
2025-10-04 05:18:43.920 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 361 - Msg: [supabase-pipeline] 23:48:43.920 🔄 Direct session refresh...
2025-10-04 05:18:43.921 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 361 - Msg: [supabase-pipeline] 23:48:43.920 🔑 getClient() called - hasClient=true isInitialized=true initPromiseActive=false
2025-10-04 05:18:43.921 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 361 - Msg: [supabase-pipeline] 23:48:43.920 🔄 Starting background session refresh with cached tokens
2025-10-04 05:18:44.123 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 361 - Msg: [supabase-pipeline] 23:48:44.121 🔄 Attempting setSession() with cached tokens (more reliable than refreshSession)
2025-10-04 05:19:48.368 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 361 - Msg: [supabase-pipeline] 23:49:48.365 ⚠️ In-flight session request timed out after 5s, clearing and retrying
2025-10-04 05:19:48.369 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 361 - Msg: [supabase-pipeline] 23:49:48.365 🔐 Attempting session recovery using cached tokens
2025-10-04 05:19:48.370 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 361 - Msg: [supabase-pipeline] 23:49:48.365 🔑 getClient() called - hasClient=true isInitialized=true initPromiseActive=false
2025-10-04 05:19:48.371 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 361 - Msg: [supabase-pipeline] 23:49:48.366 🔄 Starting background session refresh with cached tokens
2025-10-04 05:19:48.371 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 361 - Msg: [supabase-pipeline] 23:49:48.369 🔄 setSession() timed out, will try refreshSession()
2025-10-04 05:19:48.372 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 361 - Msg: [supabase-pipeline] 23:49:48.369 🔄 Attempting refreshSession() as fallback
2025-10-04 05:20:17.637 25543-25543 Capacitor               com.confessr.app                     D  App restarted
2025-10-04 05:20:17.638 25543-25543 Capacitor               com.confessr.app                     D  App started
2025-10-04 05:20:17.640 25543-25543 Capacitor/AppPlugin     com.confessr.app                     D  Firing change: true
2025-10-04 05:20:17.640 25543-25543 Capacitor/AppPlugin     com.confessr.app                     V  Notifying listeners for event appStateChange
2025-10-04 05:20:17.641 25543-25543 Capacitor/AppPlugin     com.confessr.app                     V  Notifying listeners for event resume
2025-10-04 05:20:17.647 25543-25543 Capacitor               com.confessr.app                     D  App resumed
2025-10-04 05:20:17.661 25543-29134 Capacitor/NetworkPlugin com.confessr.app                     V  Notifying listeners for event networkStatusChange
2025-10-04 05:20:17.670 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 399 - Msg: [device-lock] 23:50:17 🔓 Device unlocked after 162s (short lock)
2025-10-04 05:20:17.671 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 399 - Msg: [whatsapp-connection] 23:50:17 🔓 Device unlocked: short lock (162s)
2025-10-04 05:20:17.671 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 745 - Msg: 📱 App state changed: active
2025-10-04 05:20:17.671 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 394 - Msg: [device-lifecycle] 23:50:17 ℹ️ App resume from appStateChange {"timeSinceLastResume":1759535417659,"source":"appStateChange"}
2025-10-04 05:20:17.671 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 361 - Msg: [supabase-pipeline] 23:50:17.660 📱 App resume detected - checking session state
2025-10-04 05:20:17.671 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 361 - Msg: [supabase-pipeline] 23:50:17.660 🔄 Recovering session using cached tokens...
2025-10-04 05:20:17.671 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 361 - Msg: [supabase-pipeline] 23:50:17.660 🔑 getClient() called - hasClient=true isInitialized=true initPromiseActive=false
2025-10-04 05:20:17.672 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 361 - Msg: [supabase-pipeline] 23:50:17.660 🔄 Using cached tokens to recover session
2025-10-04 05:20:17.672 25543-25543 Capacitor/Console       com.confessr.app                     I  File:  - Line 334 - Msg: undefined
2025-10-04 05:20:17.672 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 399 - Msg: [device-lock] 23:50:17 App foreground event while not locked, treating as activity
2025-10-04 05:20:17.724 25543-25543 Capacitor/Console       com.confessr.app                     I  File:  - Line 334 - Msg: undefined
2025-10-04 05:20:17.724 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 390 - Msg: [outbox-unified] Trigger requested from: app-resume (priority: high)
2025-10-04 05:20:17.724 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 390 - Msg: [outbox-unified] Scheduling processing in 50ms for: app-resume
2025-10-04 05:20:17.724 25543-25543 Capacitor/Console       com.confessr.app                     I  File:  - Line 334 - Msg: undefined
2025-10-04 05:20:17.724 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 394 - Msg: [device-lifecycle] 23:50:17 ℹ️ App resume from resume {"timeSinceLastResume":31,"source":"resume"}
2025-10-04 05:20:17.724 25543-25543 Capacitor/Console       com.confessr.app                     D  File: https://localhost/assets/index-uMH_tBj4.js - Line 394 - Msg: [device-lifecycle] 23:50:17 🔍 Resume debounced (too soon after last resume)
2025-10-04 05:20:17.725 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/reconnectionManager-DBOB8yWH.js - Line 2 - Msg: [reconnection-mgr] 23:50:17 Reconnect already in progress, waiting - reason: device-unlock-short
2025-10-04 05:20:17.725 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 361 - Msg: [supabase-pipeline] 23:50:17.693 🔄 Direct session refresh: timeout (refreshSession hung)
2025-10-04 05:20:17.725 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 361 - Msg: [supabase-pipeline] 23:50:17.693 ⚠️ Consecutive refresh failures: 1/3
2025-10-04 05:20:17.725 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 394 - Msg: [realtime-v2] 🔧 Session refreshed successfully
2025-10-04 05:20:17.725 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 394 - Msg: [realtime-v2] 🔧 Recreating subscription
2025-10-04 05:20:17.725 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 394 - Msg: [realtime-v2] Channel error detected, cleaning up and attempting reconnection
2025-10-04 05:20:17.725 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 394 - Msg: [realtime-v2] Reconnection attempt 1/5
2025-10-04 05:20:17.725 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 394 - Msg: [realtime-v2] ⏳ Retrying reconnection in 1000ms (exponential backoff)
2025-10-04 05:20:17.915 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 394 - Msg: [network] 23:50:17 ℹ️ Network status: online {"isOnline":true,"connectionType":"wifi"}
2025-10-04 05:20:18.008 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 394 - Msg: [network] 23:50:17 ℹ️ Network reconnected
2025-10-04 05:20:18.008 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 361 - Msg: [realtime-v2] Network came online
2025-10-04 05:20:18.008 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 361 - Msg: [realtime-v2] Network online - triggering outbox processing only
2025-10-04 05:20:18.008 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 390 - Msg: [outbox-unified] Trigger requested from: network-online (priority: high)
2025-10-04 05:20:18.008 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 390 - Msg: [outbox-unified] Coalescing trigger (debounced) from: network-online
2025-10-04 05:20:18.008 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 390 - Msg: [outbox-unified] Scheduling processing in 50ms for: network-online
2025-10-04 05:20:18.077 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 361 - Msg: [supabase-pipeline] 23:50:18.028 🌐 Network reconnection detected - refreshing session
2025-10-04 05:20:18.077 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 361 - Msg: [supabase-pipeline] 23:50:18.028 🔄 Recovering session using cached tokens...
2025-10-04 05:20:18.077 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 361 - Msg: [supabase-pipeline] 23:50:18.028 🔑 getClient() called - hasClient=true isInitialized=true initPromiseActive=false
2025-10-04 05:20:18.077 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 361 - Msg: [supabase-pipeline] 23:50:18.028 🔄 Using cached tokens to recover session
2025-10-04 05:20:18.077 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 361 - Msg: [supabase-pipeline] 23:50:18.032 📦 Starting outbox processing - session outbox-1759535418032
2025-10-04 05:20:18.077 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 361 - Msg: [supabase-pipeline] 23:50:18.032 📦 Outbox pre-check: sqliteReady after 0ms
2025-10-04 05:20:18.118 25543-25543 Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 25737220, pluginId: CapacitorSQLite, methodName: query
2025-10-04 05:20:18.118 25543-25543 Capacitor               com.confessr.app                     V  callback: 25737220, pluginId: CapacitorSQLite, methodName: query, methodData: {"database":"confessr_db","statement":"\n      SELECT * FROM outbox \n      WHERE next_retry_at <= ? \n      ORDER BY next_retry_at ASC\n    ","values":[1759535418032],"readonly":false,"isSQL92":true}
2025-10-04 05:20:18.200 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 361 - Msg: [supabase-pipeline] 23:50:18.168 📦 No outbox messages to process; idle
2025-10-04 05:20:18.440 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/reconnectionManager-DBOB8yWH.js - Line 2 - Msg: [reconnection-mgr] 23:50:18 Reconnect already in progress, waiting - reason: network-online
2025-10-04 05:20:18.524 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 394 - Msg: [realtime-v2] Fast path: no existing channel; creating new
2025-10-04 05:20:18.525 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 394 - Msg: [webview] 23:50:18 ℹ️ Checking WebView readiness for realtime setup
2025-10-04 05:20:18.525 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 394 - Msg: [webview-lifecycle] 23:50:18 WebView already ready
2025-10-04 05:20:18.526 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 366 - Msg: 🔄 Fetching messages for group: 2e246d9c-356a-4fec-9022-108157fa391a (started at 23:50:18.509Z)
2025-10-04 05:20:18.526 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 394 - Msg: [realtime-v2] Setting up multi-group realtime subscription for 7 groups (active: 2e246d9c-356a-4fec-9022-108157fa391a)
2025-10-04 05:20:18.527 25543-25543 Capacitor/Console       com.confessr.app                     D  File: https://localhost/assets/index-uMH_tBj4.js - Line 394 - Msg: [timing] 23:50:18 🔍 Started timing: realtime-setup {"groupId":"2e246d9c-356a-4fec-9022-108157fa391a","totalGroups":7}
2025-10-04 05:20:18.527 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 394 - Msg: [realtime-v2] Skipping blocking auth check; proceeding with local auth state
2025-10-04 05:20:18.528 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 361 - Msg: [supabase-pipeline] 23:50:18.510 🔐 Waiting for in-flight session request (max 5s)
2025-10-04 05:20:18.605 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 366 - Msg: 📱 SQLite ready check: true (79ms)
2025-10-04 05:20:18.605 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 364 - Msg: 📦 MessageCache: HIT for group 2e246d9c-356a-4fec-9022-108157fa391a (50 messages)
2025-10-04 05:20:18.605 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 366 - Msg: 📦 Cache check completed in 0ms, found 50 messages
2025-10-04 05:20:18.605 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 366 - Msg: ⚡ INSTANT: Loading messages from in-memory cache
2025-10-04 05:20:18.605 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 366 - Msg: 🔄 mergeWithPending: incoming=50, existing=51, optimistic=0, realtime=0, final=50
2025-10-04 05:20:18.605 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 366 - Msg: ⚡ INSTANT: Displayed 50 cached messages instantly
2025-10-04 05:20:18.605 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 366 - Msg: 📱 Background refresh from SQLite (started at 80ms from group open)
2025-10-04 05:20:18.706 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 745 - Msg: 🔍 MessageList: firstUnreadMessageId=undefined, unreadCount=undefined, messages=50
2025-10-04 05:20:18.734 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 366 - Msg: 🔄 Background: Refreshing messages from SQLite to ensure cache is current
2025-10-04 05:20:18.734 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 394 - Msg: [realtime-v2] 🔄 Executing scheduled reconnection (attempt 1/5)
2025-10-04 05:20:18.734 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 394 - Msg: [realtime-v2] ⚠️ Active group changed, skipping reconnection
2025-10-04 05:20:18.760 25543-25543 Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 25737221, pluginId: CapacitorSQLite, methodName: query
2025-10-04 05:20:18.760 25543-25543 Capacitor               com.confessr.app                     V  callback: 25737221, pluginId: CapacitorSQLite, methodName: query, methodData: {"database":"confessr_db","statement":"\n      SELECT * FROM messages\n      WHERE group_id = ?\n      ORDER BY created_at DESC\n      LIMIT ?\n    ","values":["2e246d9c-356a-4fec-9022-108157fa391a",50],"readonly":false,"isSQL92":true}
2025-10-04 05:20:18.816 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 366 - Msg: 📱 SQLite query completed in 212ms, got 50 messages
2025-10-04 05:20:18.817 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 364 - Msg: 📦 MessageCache: CACHED 50 messages for group 2e246d9c-356a-4fec-9022-108157fa391a
2025-10-04 05:20:18.817 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 366 - Msg: 🔄 mergeWithPending: incoming=50, existing=50, optimistic=0, realtime=0, final=50
2025-10-04 05:20:18.818 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 366 - Msg: 🔄 Background: Updated UI with 50 fresh messages from SQLite
2025-10-04 05:20:18.915 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 366 - Msg: 🔄 Loading remaining messages in background...
2025-10-04 05:20:18.944 25543-25543 Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 25737222, pluginId: Network, methodName: getStatus
2025-10-04 05:20:18.944 25543-25543 Capacitor               com.confessr.app                     V  callback: 25737222, pluginId: Network, methodName: getStatus, methodData: {}
2025-10-04 05:20:18.945 25543-25543 Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 25737223, pluginId: CapacitorSQLite, methodName: query
2025-10-04 05:20:18.946 25543-25543 Capacitor               com.confessr.app                     V  callback: 25737223, pluginId: CapacitorSQLite, methodName: query, methodData: {"database":"confessr_db","statement":"\n      SELECT * FROM messages\n      WHERE group_id = ?\n      ORDER BY created_at DESC\n      LIMIT ?\n    ","values":["2e246d9c-356a-4fec-9022-108157fa391a",50],"readonly":false,"isSQL92":true}
2025-10-04 05:20:18.980 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 366 - Msg: 🌐 Background: Fetching messages from Supabase (non-blocking)...
2025-10-04 05:20:19.712 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 394 - Msg: [realtime-v2] Attempting to reestablish connection
2025-10-04 05:20:19.713 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 394 - Msg: [realtime-v2] Connection already in progress, skipping
2025-10-04 05:20:20.333 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 361 - Msg: [supabase-pipeline] 23:50:20.318 🔄 Recovering session using cached tokens...
2025-10-04 05:20:20.333 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 361 - Msg: [supabase-pipeline] 23:50:20.319 🔑 getClient() called - hasClient=true isInitialized=true initPromiseActive=false
2025-10-04 05:20:20.333 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 361 - Msg: [supabase-pipeline] 23:50:20.319 🔄 Starting background session refresh with cached tokens
2025-10-04 05:20:20.333 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 361 - Msg: [supabase-pipeline] 23:50:20.319 🔄 Using cached tokens to recover session
2025-10-04 05:20:20.912 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 364 - Msg: [unread] Marking group 2e246d9c-356a-4fec-9022-108157fa391a as read, lastMessageId=4dc122b0-d040-47de-a63e-9bf9fb432a1c
2025-10-04 05:20:20.912 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 745 - Msg: ✅ Marked group 2e246d9c-356a-4fec-9022-108157fa391a as read up to message 4dc122b0-d040-47de-a63e-9bf9fb432a1c
2025-10-04 05:20:22.133 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 394 - Msg: [realtime-v2] Scheduling cleanup in 5s (allows quick navigation reuse)
2025-10-04 05:20:22.236 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 399 - Msg: [whatsapp-connection] 23:50:22 📊 Status: connecting -  
2025-10-04 05:20:22.237 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 394 - Msg: [connection] 23:50:22 ℹ️ Connection status: connecting -  {"isUserVisible":false}
2025-10-04 05:20:22.238 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 394 - Msg: [realtime-v2] Creating multi-group channel: multi-group-839d1d4a-e72b-47bb-b74e-ef28a15f43ee-1759535422119-90l3cxh1lsw (7 groups)
2025-10-04 05:20:22.264 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 394 - Msg: [realtime-v2] 📡 Subscribing to messages with filter: group_id=in.(fcf73372-c86c-4e53-ac3d-f28896ce1d30,2e246d9c-356a-4fec-9022-108157fa391a,6af01500-2e15-490e-9077-316348aef93e,080c089f-e355-4ab7-a3b9-92bc9dd94f32,78045bbf-7474-46df-aac1-f34936b67d24,e96c7e8d-c7dd-4c3a-a06d-eb95da30cb2b,87faebb0-0bf4-49c9-8119-8d56abe52be2)
2025-10-04 05:20:23.004 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 394 - Msg: [realtime-v2] Subscription status: SUBSCRIBED
2025-10-04 05:20:23.004 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 394 - Msg: [realtime-v2] ✅ Realtime connected successfully
2025-10-04 05:20:23.095 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 399 - Msg: [whatsapp-connection] 23:50:23 📊 Status: connected -  
2025-10-04 05:20:23.096 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 394 - Msg: [connection] 23:50:23 ℹ️ Connection status: connected -  {"isUserVisible":false}
2025-10-04 05:20:23.096 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 394 - Msg: [realtime-v2] 💓 Starting heartbeat mechanism
2025-10-04 05:20:23.097 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 394 - Msg: [realtime-v2] 🔄 Realtime reconnected after death, fetching missed messages...
2025-10-04 05:20:23.097 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 394 - Msg: [realtime-v2] 🔧 Cleared realtimeDeathAt to prevent duplicate fetches
2025-10-04 05:20:23.606 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 361 - Msg: [supabase-pipeline] 23:50:23.604 ⚠️ In-flight session request timed out after 5s, clearing and retrying
2025-10-04 05:20:23.607 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 361 - Msg: [supabase-pipeline] 23:50:23.605 🔐 Attempting session recovery using cached tokens
2025-10-04 05:20:23.607 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 361 - Msg: [supabase-pipeline] 23:50:23.605 🔑 getClient() called - hasClient=true isInitialized=true initPromiseActive=false
2025-10-04 05:20:24.087 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 394 - Msg: [realtime-v2] 🔄 Fetching missed messages since realtime death: 2025-10-03T23:48:43.689Z
2025-10-04 05:20:24.091 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 390 - Msg: [outbox-unified] Trigger requested from: realtime-connected (priority: normal)
2025-10-04 05:20:24.092 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 390 - Msg: [outbox-unified] Scheduling processing in 75ms for: realtime-connected
2025-10-04 05:20:24.165 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 361 - Msg: [supabase-pipeline] 23:50:24.163 📦 Starting outbox processing - session outbox-1759535424163
2025-10-04 05:20:24.166 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 361 - Msg: [supabase-pipeline] 23:50:24.163 📦 Outbox pre-check: sqliteReady after 0ms
2025-10-04 05:20:24.170 25543-25543 Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 25737224, pluginId: CapacitorSQLite, methodName: query
2025-10-04 05:20:24.171 25543-25543 Capacitor               com.confessr.app                     V  callback: 25737224, pluginId: CapacitorSQLite, methodName: query, methodData: {"database":"confessr_db","statement":"\n      SELECT * FROM outbox \n      WHERE next_retry_at <= ? \n      ORDER BY next_retry_at ASC\n    ","values":[1759535424163],"readonly":false,"isSQL92":true}
2025-10-04 05:20:24.177 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 361 - Msg: [supabase-pipeline] 23:50:24.175 📦 No outbox messages to process; idle
2025-10-04 05:20:27.122 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 394 - Msg: [realtime-v2] ⏭️ Skipping cleanup - channel still active (state: joined)
2025-10-04 05:20:27.663 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 361 - Msg: [supabase-pipeline] 23:50:27.661 🔄 Token recovery timed out after 10s
2025-10-04 05:20:27.664 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 361 - Msg: [supabase-pipeline] 23:50:27.662 ⚠️ App resume: token recovery failed, session may need refresh
2025-10-04 05:20:27.666 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 361 - Msg: [supabase-pipeline] 23:50:27.662 🔑 getClient() called - hasClient=true isInitialized=true initPromiseActive=false
2025-10-04 05:20:27.667 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 361 - Msg: [supabase-pipeline] 23:50:27.663 ✅ App resume: token applied to realtime
2025-10-04 05:20:27.668 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 361 - Msg: [supabase-pipeline] 23:50:27.664 📦 Triggering outbox processing from: app-resume
2025-10-04 05:20:27.669 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 361 - Msg: [supabase-pipeline] 23:50:27.664 ✅ App resume completed using token recovery strategy
2025-10-04 05:20:27.670 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 394 - Msg: [general] 23:50:27 ℹ️ Triggered outbox processing on app resume
2025-10-04 05:20:27.671 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 394 - Msg: [device-lifecycle] 23:50:27 ℹ️ App resume processed from appStateChange
2025-10-04 05:20:27.672 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 361 - Msg: [supabase-pipeline] 23:50:27.666 📦 Starting outbox processing - session outbox-1759535427666
2025-10-04 05:20:27.673 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 361 - Msg: [supabase-pipeline] 23:50:27.667 📦 Outbox pre-check: sqliteReady after 0ms
2025-10-04 05:20:27.678 25543-25543 Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 25737225, pluginId: CapacitorSQLite, methodName: query
2025-10-04 05:20:27.679 25543-25543 Capacitor               com.confessr.app                     V  callback: 25737225, pluginId: CapacitorSQLite, methodName: query, methodData: {"database":"confessr_db","statement":"\n      SELECT * FROM outbox \n      WHERE next_retry_at <= ? \n      ORDER BY next_retry_at ASC\n    ","values":[1759535427668],"readonly":false,"isSQL92":true}
2025-10-04 05:20:27.690 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 361 - Msg: [supabase-pipeline] 23:50:27.688 📦 No outbox messages to process; idle
2025-10-04 05:20:28.032 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 361 - Msg: [supabase-pipeline] 23:50:28.029 🔄 Token recovery timed out after 10s
2025-10-04 05:20:28.033 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 361 - Msg: [supabase-pipeline] 23:50:28.029 📦 Triggering outbox processing from: network-reconnect
2025-10-04 05:20:28.034 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 361 - Msg: [supabase-pipeline] 23:50:28.030 ✅ Network reconnect session refresh completed
2025-10-04 05:20:28.035 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 361 - Msg: [supabase-pipeline] 23:50:28.030 📦 Starting outbox processing - session outbox-1759535428030
2025-10-04 05:20:28.036 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 361 - Msg: [supabase-pipeline] 23:50:28.030 📦 Outbox pre-check: sqliteReady after 0ms
2025-10-04 05:20:28.041 25543-25543 Capacitor/Plugin        com.confessr.app                     V  To native (Capacitor plugin): callbackId: 25737226, pluginId: CapacitorSQLite, methodName: query
2025-10-04 05:20:28.042 25543-25543 Capacitor               com.confessr.app                     V  callback: 25737226, pluginId: CapacitorSQLite, methodName: query, methodData: {"database":"confessr_db","statement":"\n      SELECT * FROM outbox \n      WHERE next_retry_at <= ? \n      ORDER BY next_retry_at ASC\n    ","values":[1759535428031],"readonly":false,"isSQL92":true}
2025-10-04 05:20:28.053 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 361 - Msg: [supabase-pipeline] 23:50:28.050 📦 No outbox messages to process; idle
2025-10-04 05:20:30.324 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 361 - Msg: [supabase-pipeline] 23:50:30.320 🔄 Token recovery timed out after 10s
2025-10-04 05:20:53.089 25543-25543 Capacitor/Console       com.confessr.app                     I  File: https://localhost/assets/index-uMH_tBj4.js - Line 394 - Msg: [realtime-v2] 💓 Heartbeat sent
